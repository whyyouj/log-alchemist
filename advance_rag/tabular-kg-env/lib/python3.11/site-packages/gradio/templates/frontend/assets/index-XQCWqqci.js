const __vite__fileDeps=["./module-5sppuDsl.js","./module-C-VadMaF.js","./Index-CdNwo3lV.js","./index-Xl9iYhYF.js","./index-9MP2aYHk.css","./Index-DTatRqhb.css","./module-BA06XY8_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{I as ns,S as Ci}from"./Index-CdNwo3lV.js";import{f as ce,u as is}from"./Blocks-BZk570BN.js";import{B as Ei}from"./BlockLabel-nqmpr3Sz.js";import{E as Di}from"./Empty-DpKdHCs0.js";import{S as ss}from"./ShareButton-DvmCuh5h.js";import{D as os,a as rs}from"./DownloadLink-DaQPcWCF.js";import{M as Wt}from"./Music-CDm0RGMk.js";import{a as ls,P as Ri,T as as}from"./Trim-UKwaW4UI.js";import{U as us}from"./Undo-CpmTQw3B.js";import{r as Tn}from"./file-url-CUYFthGu.js";import{_ as $n,p as cs,u as ds}from"./index-Xl9iYhYF.js";import{U as fs}from"./ModifyUpload.svelte_svelte_type_style_lang-Du0s1Wxv.js";import{M as Si}from"./ModifyUpload-C4DNJwS2.js";import{S as hs}from"./SelectSource-CscyKAT-.js";import{B as Li}from"./Button-6iwMg6dW.js";import{U as _s}from"./UploadText-So-mOkTQ.js";import{default as Ba}from"./Example-BQyGztrG.js";import"./svelte/svelte.js";import"./Upload-Cp8Go_XF.js";const{SvelteComponent:ms,append:gs,attr:le,detach:ps,init:vs,insert:bs,noop:on,safe_not_equal:ws,svg_element:zn}=window.__gradio__svelte__internal;function ks(i){let e,t;return{c(){e=zn("svg"),t=zn("path"),le(t,"stroke","currentColor"),le(t,"stroke-width","1.5"),le(t,"stroke-linecap","round"),le(t,"stroke-linejoin","round"),le(t,"d","M21.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.889-5.813a.6.6 0 0 1 0-.966l7.89-5.813ZM10.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.888-5.813a.6.6 0 0 1 0-.966l7.888-5.813Z"),le(e,"xmlns","http://www.w3.org/2000/svg"),le(e,"width","24px"),le(e,"height","24px"),le(e,"fill","currentColor"),le(e,"stroke-width","1.5"),le(e,"viewBox","0 0 24 24"),le(e,"color","currentColor")},m(n,s){bs(n,e,s),gs(e,t)},p:on,i:on,o:on,d(n){n&&ps(e)}}}class ys extends ms{constructor(e){super(),vs(this,e,null,ks,ws,{})}}const{SvelteComponent:Cs,append:Es,attr:ae,detach:Ds,init:Rs,insert:Ss,noop:rn,safe_not_equal:Ls,svg_element:Wn}=window.__gradio__svelte__internal;function Ms(i){let e,t;return{c(){e=Wn("svg"),t=Wn("path"),ae(t,"stroke","currentColor"),ae(t,"stroke-width","1.5"),ae(t,"stroke-linecap","round"),ae(t,"stroke-linejoin","round"),ae(t,"d","M2.956 5.704A.6.6 0 0 0 2 6.187v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813ZM13.956 5.704a.6.6 0 0 0-.956.483v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813Z"),ae(e,"xmlns","http://www.w3.org/2000/svg"),ae(e,"width","24px"),ae(e,"height","24px"),ae(e,"fill","currentColor"),ae(e,"stroke-width","1.5"),ae(e,"viewBox","0 0 24 24"),ae(e,"color","currentColor")},m(n,s){Ss(n,e,s),Es(e,t)},p:rn,i:rn,o:rn,d(n){n&&Ds(e)}}}class Ps extends Cs{constructor(e){super(),Rs(this,e,null,Ms,Ls,{})}}const{SvelteComponent:As,append:Et,attr:ie,detach:Ts,init:$s,insert:zs,noop:ln,safe_not_equal:Ws,svg_element:Dt,text:Os}=window.__gradio__svelte__internal;function Bs(i){let e,t,n,s,o;return{c(){e=Dt("svg"),t=Dt("title"),n=Os("Low volume"),s=Dt("path"),o=Dt("path"),ie(s,"d","M19.5 7.5C19.5 7.5 21 9 21 11.5C21 14 19.5 15.5 19.5 15.5"),ie(s,"stroke-width","1.5"),ie(s,"stroke-linecap","round"),ie(s,"stroke-linejoin","round"),ie(o,"d","M2 13.8571V10.1429C2 9.03829 2.89543 8.14286 4 8.14286H6.9C7.09569 8.14286 7.28708 8.08544 7.45046 7.97772L13.4495 4.02228C14.1144 3.5839 15 4.06075 15 4.85714V19.1429C15 19.9392 14.1144 20.4161 13.4495 19.9777L7.45046 16.0223C7.28708 15.9146 7.09569 15.8571 6.9 15.8571H4C2.89543 15.8571 2 14.9617 2 13.8571Z"),ie(o,"stroke-width","1.5"),ie(e,"width","100%"),ie(e,"height","100%"),ie(e,"viewBox","0 0 24 24"),ie(e,"stroke-width","1.5"),ie(e,"fill","none"),ie(e,"xmlns","http://www.w3.org/2000/svg"),ie(e,"stroke","currentColor"),ie(e,"color","currentColor")},m(r,u){zs(r,e,u),Et(e,t),Et(t,n),Et(e,s),Et(e,o)},p:ln,i:ln,o:ln,d(r){r&&Ts(e)}}}class Hs extends As{constructor(e){super(),$s(this,e,null,Bs,Ws,{})}}const{SvelteComponent:Ns,append:ut,attr:U,detach:Vs,init:qs,insert:Is,noop:an,safe_not_equal:js,svg_element:ct,text:Us}=window.__gradio__svelte__internal;function Fs(i){let e,t,n,s,o,r;return{c(){e=ct("svg"),t=ct("title"),n=Us("High volume"),s=ct("path"),o=ct("path"),r=ct("path"),U(s,"d","M1 13.8571V10.1429C1 9.03829 1.89543 8.14286 3 8.14286H5.9C6.09569 8.14286 6.28708 8.08544 6.45046 7.97772L12.4495 4.02228C13.1144 3.5839 14 4.06075 14 4.85714V19.1429C14 19.9392 13.1144 20.4161 12.4495 19.9777L6.45046 16.0223C6.28708 15.9146 6.09569 15.8571 5.9 15.8571H3C1.89543 15.8571 1 14.9617 1 13.8571Z"),U(s,"stroke-width","1.5"),U(o,"d","M17.5 7.5C17.5 7.5 19 9 19 11.5C19 14 17.5 15.5 17.5 15.5"),U(o,"stroke-width","1.5"),U(o,"stroke-linecap","round"),U(o,"stroke-linejoin","round"),U(r,"d","M20.5 4.5C20.5 4.5 23 7 23 11.5C23 16 20.5 18.5 20.5 18.5"),U(r,"stroke-width","1.5"),U(r,"stroke-linecap","round"),U(r,"stroke-linejoin","round"),U(e,"width","100%"),U(e,"height","100%"),U(e,"viewBox","0 0 24 24"),U(e,"stroke-width","1.5"),U(e,"fill","none"),U(e,"stroke","currentColor"),U(e,"xmlns","http://www.w3.org/2000/svg"),U(e,"color","currentColor")},m(u,a){Is(u,e,a),ut(e,t),ut(t,n),ut(e,s),ut(e,o),ut(e,r)},p:an,i:an,o:an,d(u){u&&Vs(e)}}}class Xs extends Ns{constructor(e){super(),qs(this,e,null,Fs,js,{})}}const{SvelteComponent:Gs,append:Ee,attr:j,detach:Ys,init:Zs,insert:Js,noop:un,safe_not_equal:Ks,svg_element:De,text:Qs}=window.__gradio__svelte__internal;function xs(i){let e,t,n,s,o,r,u,a,d;return{c(){e=De("svg"),t=De("title"),n=Qs("Muted volume"),s=De("g"),o=De("path"),r=De("path"),u=De("defs"),a=De("clipPath"),d=De("rect"),j(o,"d","M18 14L20.0005 12M22 10L20.0005 12M20.0005 12L18 10M20.0005 12L22 14"),j(o,"stroke-width","1.5"),j(o,"stroke-linecap","round"),j(o,"stroke-linejoin","round"),j(r,"d","M2 13.8571V10.1429C2 9.03829 2.89543 8.14286 4 8.14286H6.9C7.09569 8.14286 7.28708 8.08544 7.45046 7.97772L13.4495 4.02228C14.1144 3.5839 15 4.06075 15 4.85714V19.1429C15 19.9392 14.1144 20.4161 13.4495 19.9777L7.45046 16.0223C7.28708 15.9146 7.09569 15.8571 6.9 15.8571H4C2.89543 15.8571 2 14.9617 2 13.8571Z"),j(r,"stroke-width","1.5"),j(s,"clip-path","url(#clip0_3173_16686)"),j(d,"width","24"),j(d,"height","24"),j(d,"fill","white"),j(a,"id","clip0_3173_16686"),j(e,"width","100%"),j(e,"height","100%"),j(e,"viewBox","0 0 24 24"),j(e,"stroke-width","1.5"),j(e,"fill","none"),j(e,"xmlns","http://www.w3.org/2000/svg"),j(e,"stroke","currentColor"),j(e,"color","currentColor")},m(l,c){Js(l,e,c),Ee(e,t),Ee(t,n),Ee(e,s),Ee(s,o),Ee(s,r),Ee(e,u),Ee(u,a),Ee(a,d)},p:un,i:un,o:un,d(l){l&&Ys(e)}}}class eo extends Gs{constructor(e){super(),Zs(this,e,null,xs,Ks,{})}}var to=function(i,e,t,n){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function u(l){try{d(n.next(l))}catch(c){r(c)}}function a(l){try{d(n.throw(l))}catch(c){r(c)}}function d(l){l.done?o(l.value):s(l.value).then(u,a)}d((n=n.apply(i,e||[])).next())})};function no(i,e){return to(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(i).finally(()=>t.close())})}function io(i){const e=i[0];if(e.some(t=>t>1||t<-1)){const t=e.length;let n=0;for(let s=0;s<t;s++){const o=Math.abs(e[s]);o>n&&(n=o)}for(const s of i)for(let o=0;o<t;o++)s[o]/=n}return i}function so(i,e){return typeof i[0]=="number"&&(i=[i]),io(i),{duration:e,length:i[0].length,sampleRate:i[0].length/e,numberOfChannels:i.length,getChannelData:t=>i?.[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const cn={decode:no,createBuffer:so};var On=function(i,e,t,n){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function u(l){try{d(n.next(l))}catch(c){r(c)}}function a(l){try{d(n.throw(l))}catch(c){r(c)}}function d(l){l.done?o(l.value):s(l.value).then(u,a)}d((n=n.apply(i,e||[])).next())})};function oo(i,e,t){var n,s;return On(this,void 0,void 0,function*(){const o=yield fetch(i,t);{const r=(n=o.clone().body)===null||n===void 0?void 0:n.getReader(),u=Number((s=o.headers)===null||s===void 0?void 0:s.get("Content-Length"));let a=0;const d=(l,c)=>On(this,void 0,void 0,function*(){if(l)return;a+=c?.length||0;const f=Math.round(a/u*100);return e(f),r?.read().then(({done:m,value:g})=>d(m,g))});r?.read().then(({done:l,value:c})=>d(l,c))}return o.blob()})}const ro={fetchBlob:oo};class Ot{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const s=()=>{this.removeEventListener(e,s),this.removeEventListener(e,t)};return this.addEventListener(e,s),s}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}}class lo extends Ot{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t)}onceMediaEvent(e,t){return this.onMediaEvent(e,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}setSrc(e,t){if(this.getSrc()===e)return;this.revokeSrc();const s=t instanceof Blob?URL.createObjectURL(t):e;this.media.src=s,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function ao(i,e,t,n,s=5){let o=()=>{};if(!i)return o;const r=u=>{if(u.button===2)return;u.preventDefault(),u.stopPropagation(),i.style.touchAction="none";let a=u.clientX,d=u.clientY,l=!1;const c=g=>{g.preventDefault(),g.stopPropagation();const h=g.clientX,p=g.clientY;if(l||Math.abs(h-a)>=s||Math.abs(p-d)>=s){const{left:k,top:E}=i.getBoundingClientRect();l||(l=!0,t?.(a-k,d-E)),e(h-a,p-d,h-k,p-E),a=h,d=p}},f=g=>{l&&(g.preventDefault(),g.stopPropagation())},m=()=>{i.style.touchAction="",l&&n?.(),o()};document.addEventListener("pointermove",c),document.addEventListener("pointerup",m),document.addEventListener("pointerleave",m),document.addEventListener("click",f,!0),o=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",m),document.removeEventListener("pointerleave",m),setTimeout(()=>{document.removeEventListener("click",f,!0)},10)}};return i.addEventListener("pointerdown",r),()=>{o(),i.removeEventListener("pointerdown",r)}}class Bt extends Ot{constructor(e,t){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=n=>{const s=this.wrapper.getBoundingClientRect(),o=n.clientX-s.left,r=n.clientX-s.left,u=o/s.width,a=r/s.height;return[u,a]};this.wrapper.addEventListener("click",n=>{const[s,o]=e(n);this.emit("click",s,o)}),this.wrapper.addEventListener("dblclick",n=>{const[s,o]=e(n);this.emit("dblclick",s,o)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,r=n/s,u=(n+o)/s;this.emit("scroll",r,u)});const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){ao(this.wrapper,(e,t,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"});return t.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var e;this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect()}createDelay(e=10){const t={};return this.timeouts.push(t),n=>{t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(n,e)}}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),s=t.getContext("2d").createLinearGradient(0,0,0,t.height),o=1/(e.length-1);return e.forEach((r,u)=>{const a=u*o;s.addColorStop(a,r)}),s}renderBarWaveform(e,t,n,s){const o=e[0],r=e[1]||e[0],u=o.length,{width:a,height:d}=n.canvas,l=d/2,c=window.devicePixelRatio||1,f=t.barWidth?t.barWidth*c:1,m=t.barGap?t.barGap*c:t.barWidth?f/2:0,g=t.barRadius||0,h=a/(f+m)/u,p=g&&"roundRect"in n?"roundRect":"rect";n.beginPath();let k=0,E=0,v=0;for(let S=0;S<=u;S++){const C=Math.round(S*h);if(C>k){const M=Math.round(E*l*s),D=Math.round(v*l*s),A=M+D||1;let W=l-M;t.barAlign==="top"?W=0:t.barAlign==="bottom"&&(W=d-A),n[p](k*(f+m),W,f,A,g),k=C,E=0,v=0}const P=Math.abs(o[S]||0),R=Math.abs(r[S]||0);P>E&&(E=P),R>v&&(v=R)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const o=r=>{const u=e[r]||e[0],a=u.length,{height:d}=n.canvas,l=d/2,c=n.canvas.width/a;n.moveTo(0,l);let f=0,m=0;for(let g=0;g<=a;g++){const h=Math.round(g*c);if(h>f){const k=Math.round(m*l*s)||1,E=l+k*(r===0?-1:1);n.lineTo(f,E),f=h,m=0}const p=Math.abs(u[g]||0);p>m&&(m=p)}n.lineTo(f,l)};n.beginPath(),o(0),o(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction){t.renderFunction(e,n);return}let s=t.barHeight||1;if(t.normalize){const o=Array.from(e[0]).reduce((r,u)=>Math.max(r,Math.abs(u)),0);s=o?1/o:1}if(t.barWidth||t.barGap||t.barAlign){this.renderBarWaveform(e,t,n,s);return}this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,r,u,a){const d=window.devicePixelRatio||1,l=document.createElement("canvas"),c=e[0].length;l.width=Math.round(n*(r-o)/c),l.height=s*d,l.style.width=`${Math.floor(l.width/d)}px`,l.style.height=`${s}px`,l.style.left=`${Math.floor(o*n/d/c)}px`,u.appendChild(l);const f=l.getContext("2d");if(this.renderWaveform(e.map(m=>m.slice(o,r)),t,f),l.width>0&&l.height>0){const m=l.cloneNode(),g=m.getContext("2d");g.drawImage(l,0,0),g.globalCompositeOperation="source-in",g.fillStyle=this.convertColorValues(t.progressColor),g.fillRect(0,0,l.width,l.height),a.appendChild(m)}}renderChannel(e,t,n){const s=document.createElement("div"),o=this.getHeight();s.style.height=`${o}px`,this.canvasWrapper.style.minHeight=`${o}px`,this.canvasWrapper.appendChild(s);const r=s.cloneNode();this.progressWrapper.appendChild(r);const{scrollLeft:u,scrollWidth:a,clientWidth:d}=this.scrollContainer,l=e[0].length,c=l/a;let f=Math.min(Bt.MAX_CANVAS_WIDTH,d);if(t.barWidth||t.barGap){const C=t.barWidth||.5,P=t.barGap||C/2,R=C+P;f%R!==0&&(f=Math.floor(f/R)*R)}const m=Math.floor(Math.abs(u)*c),g=Math.floor(m+f*c),h=g-m,p=(C,P)=>{this.renderSingleCanvas(e,t,n,o,Math.max(0,C),Math.min(P,l),s,r)},k=this.createDelay(),E=this.createDelay(),v=(C,P)=>{p(C,P),C>0&&k(()=>{v(C-h,P-h)})},S=(C,P)=>{p(C,P),P<l&&E(()=>{S(C+h,P+h)})};v(m,g),g<l&&S(g,g+h)}render(e){this.timeouts.forEach(u=>u.timeout&&clearTimeout(u.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const t=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,s=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrolling=s>n;const o=this.options.fillParent&&!this.isScrolling,r=(o?n:s)*t;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let u=0;u<e.numberOfChannels;u++){const a=Object.assign(Object.assign({},this.options),this.options.splitChannels[u]);this.renderChannel([e.getChannelData(u)],a,r)}else{const u=[e.getChannelData(0)];e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,r)}this.audioData=e,this.emit("render")}reRender(){if(!this.audioData)return;const e=this.progressWrapper.clientWidth;this.render(this.audioData);const t=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=t-e}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{clientWidth:n,scrollLeft:s,scrollWidth:o}=this.scrollContainer,r=o*e,u=n/2,a=t&&this.options.autoCenter&&!this.isDragging?u:n;if(r>s+a||r<s)if(this.options.autoCenter&&!this.isDragging){const d=u/20;r-(s+u)>=d&&r<s+n?this.scrollContainer.scrollLeft+=d:this.scrollContainer.scrollLeft=r-u}else this.isDragging?this.scrollContainer.scrollLeft=r<s?r-10:r-n+10:this.scrollContainer.scrollLeft=r;{const{scrollLeft:d}=this.scrollContainer,l=d/o,c=(d+n)/o;this.emit("scroll",l,c)}}renderProgress(e,t){if(isNaN(e))return;const n=e*100;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.marginLeft=Math.round(n)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(e,t)}}Bt.MAX_CANVAS_WIDTH=4e3;class uo extends Ot{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}var dn=function(i,e,t,n){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function u(l){try{d(n.next(l))}catch(c){r(c)}}function a(l){try{d(n.throw(l))}catch(c){r(c)}}function d(l){l.done?o(l.value):s(l.value).then(u,a)}d((n=n.apply(i,e||[])).next())})};class co extends Ot{constructor(e=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return dn(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){this.currentSrc=e,fetch(e).then(t=>t.arrayBuffer()).then(t=>this.audioContext.decodeAudioData(t)).then(t=>{this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var e;this.paused&&(this.paused=!1,(e=this.bufferNode)===null||e===void 0||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var e;this.paused||(this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return dn(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(e){return dn(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){var e,t;return(t=(e=this.bufferNode)===null||e===void 0?void 0:e.playbackRate.value)!==null&&t!==void 0?t:1}set playbackRate(e){this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(e){this.emit("seeking"),this.paused?this.playedDuration=e:(this._pause(),this.playedDuration=e,this._play()),this.emit("timeupdate")}get duration(){var e;return((e=this.buffer)===null||e===void 0?void 0:e.duration)||0}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var Ke=function(i,e,t,n){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function u(l){try{d(n.next(l))}catch(c){r(c)}}function a(l){try{d(n.throw(l))}catch(c){r(c)}}function d(l){l.done?o(l.value):s(l.value).then(u,a)}d((n=n.apply(i,e||[])).next())})};const fo={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class ot extends lo{static create(e){return new ot(e)}constructor(e){const t=e.media||(e.backend==="WebAudio"?new co:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},fo,e),this.timer=new uo;const n=t?void 0:this.getMediaElement();this.renderer=new Bt(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc();s?this.load(s,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),!0),this.emit("timeupdate",e),this.emit("audioprocess",e)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t)=>{const n=this.getDuration();this.emit("scroll",e*n,t*n)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{this.options.interact&&(this.renderer.renderProgress(t),clearTimeout(e),e=setTimeout(()=>{this.seekTo(t)},this.isPlaying()?0:200),this.emit("interaction",t*this.getDuration()),this.emit("drag",t))}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e.init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return Ke(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=cn.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return Ke(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(e,t,n,s){return Ke(this,void 0,void 0,function*(){if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!t&&!n){const o=r=>this.emit("loading",r);t=yield ro.fetchBlob(e,o,this.options.fetchParams)}if(this.setSrc(e,t),s=(yield Promise.resolve(s||this.getDuration()))||(yield new Promise(o=>{this.onceMediaEvent("loadedmetadata",()=>o(this.getDuration()))}))||(yield Promise.resolve(0)),n)this.decodedData=cn.createBuffer(n,s);else if(t){const o=yield t.arrayBuffer();this.decodedData=yield cn.decode(o,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(e,t,n){return Ke(this,void 0,void 0,function*(){yield this.loadAudio(e,void 0,t,n)})}loadBlob(e,t,n){return Ke(this,void 0,void 0,function*(){yield this.loadAudio("blob",e,t,n)})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let r=0;r<s;r++){const u=this.decodedData.getChannelData(r),a=[],d=Math.round(u.length/t);for(let l=0;l<t;l++){const c=u.slice(l*d,(l+1)*d),f=Math.max(...c);a.push(Math.round(f*n)/n)}o.push(a)}return o}getDuration(){let e=super.getDuration()||0;return(e===0||e===1/0)&&this.decodedData&&(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}playPause(){return Ke(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(e=>e.destroy()),this.subscriptions.forEach(e=>e()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}function ho(i){const e=i.numberOfChannels,t=i.length*e*2+44,n=new ArrayBuffer(t),s=new DataView(n);let o=0;const r=function(u,a,d){for(let l=0;l<d.length;l++)u.setUint8(a+l,d.charCodeAt(l))};r(s,o,"RIFF"),o+=4,s.setUint32(o,t-8,!0),o+=4,r(s,o,"WAVE"),o+=4,r(s,o,"fmt "),o+=4,s.setUint32(o,16,!0),o+=4,s.setUint16(o,1,!0),o+=2,s.setUint16(o,e,!0),o+=2,s.setUint32(o,i.sampleRate,!0),o+=4,s.setUint32(o,i.sampleRate*2*e,!0),o+=4,s.setUint16(o,e*2,!0),o+=2,s.setUint16(o,16,!0),o+=2,r(s,o,"data"),o+=4,s.setUint32(o,i.length*e*2,!0),o+=4;for(let u=0;u<i.length;u++)for(let a=0;a<e;a++){const d=Math.max(-1,Math.min(1,i.getChannelData(a)[u]));s.setInt16(o,d*32767,!0),o+=2}return new Uint8Array(n)}const gn=async(i,e,t,n)=>{const s=new AudioContext({sampleRate:n||i.sampleRate}),o=i.numberOfChannels,r=n||i.sampleRate;let u=i.length,a=0;e&&t&&(a=Math.round(e*r),u=Math.round(t*r)-a);const d=s.createBuffer(o,u,r);for(let l=0;l<o;l++){const c=i.getChannelData(l),f=d.getChannelData(l);for(let m=0;m<u;m++)f[m]=c[a+m]}return ho(d)},Pt=(i,e)=>{i&&i.skip(e)},tt=(i,e)=>(e||(e=5),i/100*e||5);let Mi=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const s=()=>{this.removeEventListener(e,s),this.removeEventListener(e,t)};return this.addEventListener(e,s),s}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}},_o=class extends Mi{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}};function St(i,e,t,n,s=5){let o=()=>{};if(!i)return o;const r=u=>{if(u.button===2)return;u.preventDefault(),u.stopPropagation(),i.style.touchAction="none";let a=u.clientX,d=u.clientY,l=!1;const c=g=>{g.preventDefault(),g.stopPropagation();const h=g.clientX,p=g.clientY;if(l||Math.abs(h-a)>=s||Math.abs(p-d)>=s){const{left:k,top:E}=i.getBoundingClientRect();l||(l=!0,t?.(a-k,d-E)),e(h-a,p-d,h-k,p-E),a=h,d=p}},f=g=>{l&&(g.preventDefault(),g.stopPropagation())},m=()=>{i.style.touchAction="",l&&n?.(),o()};document.addEventListener("pointermove",c),document.addEventListener("pointerup",m),document.addEventListener("pointerleave",m),document.addEventListener("click",f,!0),o=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",m),document.removeEventListener("pointerleave",m),setTimeout(()=>{document.removeEventListener("click",f,!0)},10)}};return i.addEventListener("pointerdown",r),()=>{o(),i.removeEventListener("pointerdown",r)}}class Bn extends Mi{constructor(e,t,n=0){var s,o,r,u,a,d,l;super(),this.totalDuration=t,this.numberOfChannels=n,this.minLength=0,this.maxLength=1/0,this.id=e.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(e.start),this.end=this.clampPosition((s=e.end)!==null&&s!==void 0?s:e.start),this.drag=(o=e.drag)===null||o===void 0||o,this.resize=(r=e.resize)===null||r===void 0||r,this.color=(u=e.color)!==null&&u!==void 0?u:"rgba(0, 0, 0, 0.1)",this.minLength=(a=e.minLength)!==null&&a!==void 0?a:this.minLength,this.maxLength=(d=e.maxLength)!==null&&d!==void 0?d:this.maxLength,this.channelIdx=(l=e.channelIdx)!==null&&l!==void 0?l:-1,this.element=this.initElement(),this.setContent(e.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(e){return Math.max(0,Math.min(this.totalDuration,e))}setPart(){const e=this.start===this.end;this.element.setAttribute("part",`${e?"marker":"region"} ${this.id}`)}addResizeHandles(e){const t=document.createElement("div");t.setAttribute("data-resize","left"),t.setAttribute("style",`
        position: absolute;
        z-index: 2;
        width: 6px;
        height: 100%;
        top: 0;
        left: 0;
        border-left: 2px solid rgba(0, 0, 0, 0.5);
        border-radius: 2px 0 0 2px;
        cursor: ew-resize;
        word-break: keep-all;
      `),t.setAttribute("part","region-handle region-handle-left");const n=t.cloneNode();n.setAttribute("data-resize","right"),n.style.left="",n.style.right="0",n.style.borderRight=n.style.borderLeft,n.style.borderLeft="",n.style.borderRadius="0 2px 2px 0",n.setAttribute("part","region-handle region-handle-right"),e.appendChild(t),e.appendChild(n),St(t,s=>this.onResize(s,"start"),()=>null,()=>this.onEndResizing(),1),St(n,s=>this.onResize(s,"end"),()=>null,()=>this.onEndResizing(),1)}removeResizeHandles(e){const t=e.querySelector('[data-resize="left"]'),n=e.querySelector('[data-resize="right"]');t&&e.removeChild(t),n&&e.removeChild(n)}initElement(){const e=document.createElement("div"),t=this.start===this.end;let n=0,s=100;return this.channelIdx>=0&&this.channelIdx<this.numberOfChannels&&(s=100/this.numberOfChannels,n=s*this.channelIdx),e.setAttribute("style",`
      position: absolute;
      top: ${n}%;
      height: ${s}%;
      background-color: ${t?"none":this.color};
      border-left: ${t?"2px solid "+this.color:"none"};
      border-radius: 2px;
      box-sizing: border-box;
      transition: background-color 0.2s ease;
      cursor: ${this.drag?"grab":"default"};
      pointer-events: all;
    `),!t&&this.resize&&this.addResizeHandles(e),e}renderPosition(){const e=this.start/this.totalDuration,t=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*e+"%",this.element.style.right=100*t+"%"}initMouseEvents(){const{element:e}=this;e&&(e.addEventListener("click",t=>this.emit("click",t)),e.addEventListener("mouseenter",t=>this.emit("over",t)),e.addEventListener("mouseleave",t=>this.emit("leave",t)),e.addEventListener("dblclick",t=>this.emit("dblclick",t)),St(e,t=>this.onMove(t),()=>this.onStartMoving(),()=>this.onEndMoving()))}onStartMoving(){this.drag&&(this.element.style.cursor="grabbing")}onEndMoving(){this.drag&&(this.element.style.cursor="grab",this.emit("update-end"))}_onUpdate(e,t){if(!this.element.parentElement)return;const n=e/this.element.parentElement.clientWidth*this.totalDuration,s=t&&t!=="start"?this.start:this.start+n,o=t&&t!=="end"?this.end:this.end+n,r=o-s;s>=0&&o<=this.totalDuration&&s<=o&&r>=this.minLength&&r<=this.maxLength&&(this.start=s,this.end=o,this.renderPosition(),this.emit("update"))}onMove(e){this.drag&&this._onUpdate(e)}onResize(e,t){this.resize&&this._onUpdate(e,t)}onEndResizing(){this.resize&&this.emit("update-end")}_setTotalDuration(e){this.totalDuration=e,this.renderPosition()}play(){this.emit("play")}setContent(e){var t;if((t=this.content)===null||t===void 0||t.remove(),e){if(typeof e=="string"){this.content=document.createElement("div");const n=this.start===this.end;this.content.style.padding=`0.2em ${n?.2:.4}em`,this.content.textContent=e}else this.content=e;this.content.setAttribute("part","region-content"),this.element.appendChild(this.content)}else this.content=void 0}setOptions(e){var t,n;if(e.color&&(this.color=e.color,this.element.style.backgroundColor=this.color),e.drag!==void 0&&(this.drag=e.drag,this.element.style.cursor=this.drag?"grab":"default"),e.start!==void 0||e.end!==void 0){const s=this.start===this.end;this.start=this.clampPosition((t=e.start)!==null&&t!==void 0?t:this.start),this.end=this.clampPosition((n=e.end)!==null&&n!==void 0?n:s?this.start:this.end),this.renderPosition(),this.setPart()}if(e.content&&this.setContent(e.content),e.id&&(this.id=e.id,this.setPart()),e.resize!==void 0&&e.resize!==this.resize){const s=this.start===this.end;this.resize=e.resize,this.resize&&!s?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}}remove(){this.emit("remove"),this.element.remove(),this.element=null}}let mo=class Pi extends _o{constructor(e){super(e),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(e){return new Pi(e)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer);let e=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",t=>{const n=this.regions.filter(s=>s.start<=t&&s.end>=t);n.forEach(s=>{e.includes(s)||this.emit("region-in",s)}),e.forEach(s=>{n.includes(s)||this.emit("region-out",s)}),e=n}))}initRegionsContainer(){const e=document.createElement("div");return e.setAttribute("style",`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 3;
      pointer-events: none;
    `),e}getRegions(){return this.regions}avoidOverlapping(e){if(!e.content)return;const t=e.content,n=t.getBoundingClientRect().left,s=e.element.scrollWidth,o=this.regions.filter(r=>{if(r===e||!r.content)return!1;const u=r.content.getBoundingClientRect().left,a=r.element.scrollWidth;return n<u+a&&u<n+s}).map(r=>{var u;return((u=r.content)===null||u===void 0?void 0:u.getBoundingClientRect().height)||0}).reduce((r,u)=>r+u,0);t.style.marginTop=`${o}px`}saveRegion(e){this.regionsContainer.appendChild(e.element),this.avoidOverlapping(e),this.regions.push(e);const t=[e.on("update-end",()=>{this.avoidOverlapping(e),this.emit("region-updated",e)}),e.on("play",()=>{var n,s;(n=this.wavesurfer)===null||n===void 0||n.play(),(s=this.wavesurfer)===null||s===void 0||s.setTime(e.start)}),e.on("click",n=>{this.emit("region-clicked",e,n)}),e.on("dblclick",n=>{this.emit("region-double-clicked",e,n)}),e.once("remove",()=>{t.forEach(n=>n()),this.regions=this.regions.filter(n=>n!==e)})];this.subscriptions.push(...t),this.emit("region-created",e)}addRegion(e){var t,n;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const s=this.wavesurfer.getDuration(),o=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getDecodedData())===null||n===void 0?void 0:n.numberOfChannels,r=new Bn(e,s,o);return s?this.saveRegion(r):this.subscriptions.push(this.wavesurfer.once("ready",u=>{r._setTotalDuration(u),this.saveRegion(r)})),r}enableDragSelection(e){var t,n;const s=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getWrapper())===null||n===void 0?void 0:n.querySelector("div");if(!s)return()=>{};let o=null,r=0;return St(s,(u,a,d)=>{o&&o._onUpdate(u,d>r?"end":"start")},u=>{var a,d;if(r=u,!this.wavesurfer)return;const l=this.wavesurfer.getDuration(),c=(d=(a=this.wavesurfer)===null||a===void 0?void 0:a.getDecodedData())===null||d===void 0?void 0:d.numberOfChannels,f=this.wavesurfer.getWrapper().clientWidth,m=u/f*l,g=(u+5)/f*l;o=new Bn(Object.assign(Object.assign({},e),{start:m,end:g}),l,c),this.regionsContainer.appendChild(o.element)},()=>{o&&(this.saveRegion(o),o=null)})}clearRegions(){this.regions.forEach(e=>e.remove())}destroy(){this.clearRegions(),super.destroy()}};const{SvelteComponent:go,check_outros:po,create_component:kn,destroy_component:yn,detach:vo,empty:bo,flush:wo,group_outros:ko,init:yo,insert:Co,mount_component:Cn,safe_not_equal:Eo,transition_in:bt,transition_out:wt}=window.__gradio__svelte__internal;function Do(i){let e,t;return e=new Xs({}),{c(){kn(e.$$.fragment)},m(n,s){Cn(e,n,s),t=!0},i(n){t||(bt(e.$$.fragment,n),t=!0)},o(n){wt(e.$$.fragment,n),t=!1},d(n){yn(e,n)}}}function Ro(i){let e,t;return e=new Hs({}),{c(){kn(e.$$.fragment)},m(n,s){Cn(e,n,s),t=!0},i(n){t||(bt(e.$$.fragment,n),t=!0)},o(n){wt(e.$$.fragment,n),t=!1},d(n){yn(e,n)}}}function So(i){let e,t;return e=new eo({}),{c(){kn(e.$$.fragment)},m(n,s){Cn(e,n,s),t=!0},i(n){t||(bt(e.$$.fragment,n),t=!0)},o(n){wt(e.$$.fragment,n),t=!1},d(n){yn(e,n)}}}function Lo(i){let e,t,n,s;const o=[So,Ro,Do],r=[];function u(a,d){return a[0]==0?0:a[0]<.5?1:a[0]>=.5?2:-1}return~(e=u(i))&&(t=r[e]=o[e](i)),{c(){t&&t.c(),n=bo()},m(a,d){~e&&r[e].m(a,d),Co(a,n,d),s=!0},p(a,[d]){let l=e;e=u(a),e!==l&&(t&&(ko(),wt(r[l],1,1,()=>{r[l]=null}),po()),~e?(t=r[e],t||(t=r[e]=o[e](a),t.c()),bt(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(bt(t),s=!0)},o(a){wt(t),s=!1},d(a){a&&vo(n),~e&&r[e].d(a)}}}function Mo(i,e,t){let{currentVolume:n}=e;return i.$$set=s=>{"currentVolume"in s&&t(0,n=s.currentVolume)},[n]}class Po extends go{constructor(e){super(),yo(this,e,Mo,Lo,Eo,{currentVolume:0})}get currentVolume(){return this.$$.ctx[0]}set currentVolume(e){this.$$set({currentVolume:e}),wo()}}const{SvelteComponent:Ao,attr:Qe,binding_callbacks:To,detach:$o,element:zo,flush:fn,init:Wo,insert:Oo,listen:Hn,noop:Nn,run_all:Bo,safe_not_equal:Ho}=window.__gradio__svelte__internal,{onMount:No}=window.__gradio__svelte__internal;function Vo(i){let e,t,n;return{c(){e=zo("input"),Qe(e,"id","volume"),Qe(e,"class","volume-slider svelte-wuo8j5"),Qe(e,"type","range"),Qe(e,"min","0"),Qe(e,"max","1"),Qe(e,"step","0.01"),e.value=i[0]},m(s,o){Oo(s,e,o),i[4](e),t||(n=[Hn(e,"focusout",i[5]),Hn(e,"input",i[6])],t=!0)},p(s,[o]){o&1&&(e.value=s[0])},i:Nn,o:Nn,d(s){s&&$o(e),i[4](null),t=!1,Bo(n)}}}function qo(i,e,t){let{currentVolume:n=1}=e,{show_volume_slider:s=!1}=e,{waveform:o}=e,r;No(()=>{u()});const u=()=>{let c=r;c&&(c.style.background=`linear-gradient(to right, var(--color-accent) ${n*100}%, var(--neutral-400) ${n*100}%)`)};function a(c){To[c?"unshift":"push"](()=>{r=c,t(3,r)})}const d=()=>t(1,s=!1),l=c=>{c.target instanceof HTMLInputElement&&(t(0,n=parseFloat(c.target.value)),o.setVolume(n))};return i.$$set=c=>{"currentVolume"in c&&t(0,n=c.currentVolume),"show_volume_slider"in c&&t(1,s=c.show_volume_slider),"waveform"in c&&t(2,o=c.waveform)},i.$$.update=()=>{i.$$.dirty&1&&u()},[n,s,o,r,a,d,l]}class Io extends Ao{constructor(e){super(),Wo(this,e,qo,Vo,Ho,{currentVolume:0,show_volume_slider:1,waveform:2})}get currentVolume(){return this.$$.ctx[0]}set currentVolume(e){this.$$set({currentVolume:e}),fn()}get show_volume_slider(){return this.$$.ctx[1]}set show_volume_slider(e){this.$$set({show_volume_slider:e}),fn()}get waveform(){return this.$$.ctx[2]}set waveform(e){this.$$set({waveform:e}),fn()}}const{SvelteComponent:jo,add_flush_callback:Vn,append:G,attr:H,bind:qn,binding_callbacks:In,check_outros:gt,create_component:Pe,destroy_component:Ae,detach:Te,element:se,empty:Uo,flush:x,group_outros:pt,init:Fo,insert:$e,listen:ve,mount_component:ze,noop:vt,run_all:Ai,safe_not_equal:Xo,set_data:Go,set_style:jn,space:Se,text:Un,toggle_class:Fn,transition_in:q,transition_out:F}=window.__gradio__svelte__internal;function Xn(i){let e,t,n,s;function o(a){i[27](a)}function r(a){i[28](a)}let u={waveform:i[2]};return i[12]!==void 0&&(u.currentVolume=i[12]),i[1]!==void 0&&(u.show_volume_slider=i[1]),e=new Io({props:u}),In.push(()=>qn(e,"currentVolume",o)),In.push(()=>qn(e,"show_volume_slider",r)),{c(){Pe(e.$$.fragment)},m(a,d){ze(e,a,d),s=!0},p(a,d){const l={};d[0]&4&&(l.waveform=a[2]),!t&&d[0]&4096&&(t=!0,l.currentVolume=a[12],Vn(()=>t=!1)),!n&&d[0]&2&&(n=!0,l.show_volume_slider=a[1],Vn(()=>n=!1)),e.$set(l)},i(a){s||(q(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){Ae(e,a)}}}function Yo(i){let e,t;return e=new ls({}),{c(){Pe(e.$$.fragment)},m(n,s){ze(e,n,s),t=!0},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){Ae(e,n)}}}function Zo(i){let e,t;return e=new Ri({}),{c(){Pe(e.$$.fragment)},m(n,s){ze(e,n,s),t=!0},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){Ae(e,n)}}}function Gn(i){let e,t,n,s,o,r=i[6]&&i[0]===""&&Yn(i);const u=[Ko,Jo],a=[];function d(l,c){return l[0]===""?0:1}return t=d(i),n=a[t]=u[t](i),{c(){r&&r.c(),e=Se(),n.c(),s=Uo()},m(l,c){r&&r.m(l,c),$e(l,e,c),a[t].m(l,c),$e(l,s,c),o=!0},p(l,c){l[6]&&l[0]===""?r?(r.p(l,c),c[0]&65&&q(r,1)):(r=Yn(l),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(pt(),F(r,1,1,()=>{r=null}),gt());let f=t;t=d(l),t===f?a[t].p(l,c):(pt(),F(a[f],1,1,()=>{a[f]=null}),gt(),n=a[t],n?n.p(l,c):(n=a[t]=u[t](l),n.c()),q(n,1),n.m(s.parentNode,s))},i(l){o||(q(r),q(n),o=!0)},o(l){F(r),F(n),o=!1},d(l){l&&(Te(e),Te(s)),r&&r.d(l),a[t].d(l)}}}function Yn(i){let e,t,n,s,o;return t=new us({}),{c(){e=se("button"),Pe(t.$$.fragment),H(e,"class","action icon svelte-ije4bl"),H(e,"aria-label","Reset audio")},m(r,u){$e(r,e,u),ze(t,e,null),n=!0,s||(o=ve(e,"click",i[33]),s=!0)},p:vt,i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){r&&Te(e),Ae(t),s=!1,o()}}}function Jo(i){let e,t,n,s,o;return{c(){e=se("button"),e.textContent="Trim",t=Se(),n=se("button"),n.textContent="Cancel",H(e,"class","text-button svelte-ije4bl"),H(n,"class","text-button svelte-ije4bl")},m(r,u){$e(r,e,u),$e(r,t,u),$e(r,n,u),s||(o=[ve(e,"click",i[14]),ve(n,"click",i[16])],s=!0)},p:vt,i:vt,o:vt,d(r){r&&(Te(e),Te(t),Te(n)),s=!1,Ai(o)}}}function Ko(i){let e,t,n,s,o;return t=new as({}),{c(){e=se("button"),Pe(t.$$.fragment),H(e,"class","action icon svelte-ije4bl"),H(e,"aria-label","Trim audio to selection")},m(r,u){$e(r,e,u),ze(t,e,null),n=!0,s||(o=ve(e,"click",i[16]),s=!0)},p:vt,i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){r&&Te(e),Ae(t),s=!1,o()}}}function Qo(i){let e,t,n,s,o,r,u,a,d,l,c,f,m,g,h,p,k,E,v,S,C,P,R,M,D,A,W,z,O,I;s=new Po({props:{currentVolume:i[12]}});let $=i[1]&&Xn(i);h=new ys({});const T=[Zo,Yo],b=[];function N(L,w){return L[5]?0:1}v=N(i),S=b[v]=T[v](i),M=new Ps({});let B=i[10]&&i[7]&&Gn(i);return{c(){e=se("div"),t=se("div"),n=se("button"),Pe(s.$$.fragment),o=Se(),$&&$.c(),r=Se(),u=se("button"),a=se("span"),d=Un(i[11]),l=Un("x"),f=Se(),m=se("div"),g=se("button"),Pe(h.$$.fragment),k=Se(),E=se("button"),S.c(),P=Se(),R=se("button"),Pe(M.$$.fragment),A=Se(),W=se("div"),B&&B.c(),H(n,"class","action icon volume svelte-ije4bl"),H(n,"aria-label","Adjust volume"),jn(n,"color",i[1]?"var(--color-accent)":"var(--neutral-400)"),H(u,"class","playback icon svelte-ije4bl"),H(u,"aria-label",c=`Adjust playback speed to ${i[13][(i[13].indexOf(i[11])+1)%i[13].length]}x`),Fn(u,"hidden",i[1]),H(t,"class","control-wrapper svelte-ije4bl"),H(g,"class","rewind icon svelte-ije4bl"),H(g,"aria-label",p=`Skip backwards by ${tt(i[3],i[9].skip_length)} seconds`),H(E,"class","play-pause-button icon svelte-ije4bl"),H(E,"aria-label",C=i[5]?i[4]("audio.pause"):i[4]("audio.play")),H(R,"class","skip icon svelte-ije4bl"),H(R,"aria-label",D="Skip forward by "+tt(i[3],i[9].skip_length)+" seconds"),H(m,"class","play-pause-wrapper svelte-ije4bl"),H(W,"class","settings-wrapper svelte-ije4bl"),H(e,"class","controls svelte-ije4bl"),H(e,"data-testid","waveform-controls")},m(L,w){$e(L,e,w),G(e,t),G(t,n),ze(s,n,null),G(t,o),$&&$.m(t,null),G(t,r),G(t,u),G(u,a),G(a,d),G(a,l),G(e,f),G(e,m),G(m,g),ze(h,g,null),G(m,k),G(m,E),b[v].m(E,null),G(m,P),G(m,R),ze(M,R,null),G(e,A),G(e,W),B&&B.m(W,null),z=!0,O||(I=[ve(n,"click",i[26]),ve(u,"click",i[29]),ve(g,"click",i[30]),ve(E,"click",i[31]),ve(R,"click",i[32])],O=!0)},p(L,w){const X={};w[0]&4096&&(X.currentVolume=L[12]),s.$set(X),w[0]&2&&jn(n,"color",L[1]?"var(--color-accent)":"var(--neutral-400)"),L[1]?$?($.p(L,w),w[0]&2&&q($,1)):($=Xn(L),$.c(),q($,1),$.m(t,r)):$&&(pt(),F($,1,1,()=>{$=null}),gt()),(!z||w[0]&2048)&&Go(d,L[11]),(!z||w[0]&2048&&c!==(c=`Adjust playback speed to ${L[13][(L[13].indexOf(L[11])+1)%L[13].length]}x`))&&H(u,"aria-label",c),(!z||w[0]&2)&&Fn(u,"hidden",L[1]),(!z||w[0]&520&&p!==(p=`Skip backwards by ${tt(L[3],L[9].skip_length)} seconds`))&&H(g,"aria-label",p);let y=v;v=N(L),v!==y&&(pt(),F(b[y],1,1,()=>{b[y]=null}),gt(),S=b[v],S||(S=b[v]=T[v](L),S.c()),q(S,1),S.m(E,null)),(!z||w[0]&48&&C!==(C=L[5]?L[4]("audio.pause"):L[4]("audio.play")))&&H(E,"aria-label",C),(!z||w[0]&520&&D!==(D="Skip forward by "+tt(L[3],L[9].skip_length)+" seconds"))&&H(R,"aria-label",D),L[10]&&L[7]?B?(B.p(L,w),w[0]&1152&&q(B,1)):(B=Gn(L),B.c(),q(B,1),B.m(W,null)):B&&(pt(),F(B,1,1,()=>{B=null}),gt())},i(L){z||(q(s.$$.fragment,L),q($),q(h.$$.fragment,L),q(S),q(M.$$.fragment,L),q(B),z=!0)},o(L){F(s.$$.fragment,L),F($),F(h.$$.fragment,L),F(S),F(M.$$.fragment,L),F(B),z=!1},d(L){L&&Te(e),Ae(s),$&&$.d(),Ae(h),b[v].d(),Ae(M),B&&B.d(),O=!1,Ai(I)}}}function xo(i,e,t){let{waveform:n}=e,{audio_duration:s}=e,{i18n:o}=e,{playing:r}=e,{show_redo:u=!1}=e,{interactive:a=!1}=e,{handle_trim_audio:d}=e,{mode:l=""}=e,{container:c}=e,{handle_reset_value:f}=e,{waveform_options:m={}}=e,{trim_region_settings:g={}}=e,{show_volume_slider:h=!1}=e,{editable:p=!0}=e,{trimDuration:k=0}=e,E=[.5,1,1.5,2],v=E[1],S,C=null,P,R,M="",D=1;const A=()=>{t(22,C=S.addRegion({start:s/4,end:s/2,...g})),t(17,k=C.end-C.start)},W=()=>{if(n&&S&&C){const y=C.start,J=C.end;d(y,J),t(0,l=""),t(22,C=null)}},z=()=>{S?.getRegions().forEach(y=>{y.remove()}),S?.clearRegions()},O=()=>{z(),l==="edit"?t(0,l=""):(t(0,l="edit"),A())},I=(y,J)=>{let re,_e;C&&(y==="left"?J==="ArrowLeft"?(re=C.start-.05,_e=C.end):(re=C.start+.05,_e=C.end):J==="ArrowLeft"?(re=C.start,_e=C.end-.05):(re=C.start,_e=C.end+.05),C.setOptions({start:re,end:_e}),t(17,k=C.end-C.start))},$=()=>t(1,h=!h);function T(y){D=y,t(12,D)}function b(y){h=y,t(1,h)}const N=()=>{t(11,v=E[(E.indexOf(v)+1)%E.length]),n.setPlaybackRate(v)},B=()=>n.skip(tt(s,m.skip_length)*-1),L=()=>n.playPause(),w=()=>n.skip(tt(s,m.skip_length)),X=()=>{f(),z(),t(0,l="")};return i.$$set=y=>{"waveform"in y&&t(2,n=y.waveform),"audio_duration"in y&&t(3,s=y.audio_duration),"i18n"in y&&t(4,o=y.i18n),"playing"in y&&t(5,r=y.playing),"show_redo"in y&&t(6,u=y.show_redo),"interactive"in y&&t(7,a=y.interactive),"handle_trim_audio"in y&&t(18,d=y.handle_trim_audio),"mode"in y&&t(0,l=y.mode),"container"in y&&t(19,c=y.container),"handle_reset_value"in y&&t(8,f=y.handle_reset_value),"waveform_options"in y&&t(9,m=y.waveform_options),"trim_region_settings"in y&&t(20,g=y.trim_region_settings),"show_volume_slider"in y&&t(1,h=y.show_volume_slider),"editable"in y&&t(10,p=y.editable),"trimDuration"in y&&t(17,k=y.trimDuration)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(21,S=n.registerPlugin(mo.create())),i.$$.dirty[0]&2097152&&S?.on("region-out",y=>{y.play()}),i.$$.dirty[0]&2097152&&S?.on("region-updated",y=>{t(17,k=y.end-y.start)}),i.$$.dirty[0]&2097152&&S?.on("region-clicked",(y,J)=>{J.stopPropagation(),t(22,C=y),y.play()}),i.$$.dirty[0]&31981568&&C){const y=c.children[0].shadowRoot;t(24,R=y.querySelector('[data-resize="right"]')),t(23,P=y.querySelector('[data-resize="left"]')),P&&R&&(P.setAttribute("role","button"),R.setAttribute("role","button"),P?.setAttribute("aria-label","Drag to adjust start time"),R?.setAttribute("aria-label","Drag to adjust end time"),P?.setAttribute("tabindex","0"),R?.setAttribute("tabindex","0"),P.addEventListener("focus",()=>{S&&t(25,M="left")}),R.addEventListener("focus",()=>{S&&t(25,M="right")}))}i.$$.dirty[0]&35651584&&S&&window.addEventListener("keydown",y=>{y.key==="ArrowLeft"?I(M,"ArrowLeft"):y.key==="ArrowRight"&&I(M,"ArrowRight")})},[l,h,n,s,o,r,u,a,f,m,p,v,D,E,W,z,O,k,d,c,g,S,C,P,R,M,$,T,b,N,B,L,w,X]}class Ti extends jo{constructor(e){super(),Fo(this,e,xo,Qo,Xo,{waveform:2,audio_duration:3,i18n:4,playing:5,show_redo:6,interactive:7,handle_trim_audio:18,mode:0,container:19,handle_reset_value:8,waveform_options:9,trim_region_settings:20,show_volume_slider:1,editable:10,trimDuration:17},null,[-1,-1])}get waveform(){return this.$$.ctx[2]}set waveform(e){this.$$set({waveform:e}),x()}get audio_duration(){return this.$$.ctx[3]}set audio_duration(e){this.$$set({audio_duration:e}),x()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),x()}get playing(){return this.$$.ctx[5]}set playing(e){this.$$set({playing:e}),x()}get show_redo(){return this.$$.ctx[6]}set show_redo(e){this.$$set({show_redo:e}),x()}get interactive(){return this.$$.ctx[7]}set interactive(e){this.$$set({interactive:e}),x()}get handle_trim_audio(){return this.$$.ctx[18]}set handle_trim_audio(e){this.$$set({handle_trim_audio:e}),x()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),x()}get container(){return this.$$.ctx[19]}set container(e){this.$$set({container:e}),x()}get handle_reset_value(){return this.$$.ctx[8]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),x()}get waveform_options(){return this.$$.ctx[9]}set waveform_options(e){this.$$set({waveform_options:e}),x()}get trim_region_settings(){return this.$$.ctx[20]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),x()}get show_volume_slider(){return this.$$.ctx[1]}set show_volume_slider(e){this.$$set({show_volume_slider:e}),x()}get editable(){return this.$$.ctx[10]}set editable(e){this.$$set({editable:e}),x()}get trimDuration(){return this.$$.ctx[17]}set trimDuration(e){this.$$set({trimDuration:e}),x()}}const{SvelteComponent:er,add_flush_callback:hn,append:fe,attr:Q,bind:_n,binding_callbacks:st,check_outros:$i,create_component:En,destroy_component:Dn,detach:Ht,element:pe,empty:tr,flush:de,group_outros:zi,init:nr,insert:Nt,mount_component:Rn,noop:Zn,safe_not_equal:ir,set_data:sr,space:Rt,src_url_equal:Jn,text:or,transition_in:We,transition_out:je}=window.__gradio__svelte__internal,{onMount:rr}=window.__gradio__svelte__internal,{createEventDispatcher:lr}=window.__gradio__svelte__internal;function ar(i){let e,t,n,s,o,r,u,a,d,l,c,f,m,g=i[0]==="edit"&&i[16]>0&&Kn(i),h=i[11]&&Qn(i);return{c(){e=pe("div"),t=pe("div"),n=pe("div"),s=Rt(),o=pe("div"),r=pe("time"),r.textContent="0:00",u=Rt(),a=pe("div"),g&&g.c(),d=Rt(),l=pe("time"),l.textContent="0:00",c=Rt(),h&&h.c(),Q(n,"id","waveform"),Q(n,"class","svelte-1ark3ru"),Q(t,"class","waveform-container svelte-1ark3ru"),Q(r,"id","time"),Q(r,"class","svelte-1ark3ru"),Q(l,"id","duration"),Q(l,"class","svelte-1ark3ru"),Q(o,"class","timestamps svelte-1ark3ru"),Q(e,"class","component-wrapper svelte-1ark3ru"),Q(e,"data-testid",f=i[2]?"waveform-"+i[2]:"unlabelled-audio")},m(p,k){Nt(p,e,k),fe(e,t),fe(t,n),i[21](n),fe(e,s),fe(e,o),fe(o,r),i[22](r),fe(o,u),fe(o,a),g&&g.m(a,null),fe(a,d),fe(a,l),i[23](l),fe(e,c),h&&h.m(e,null),m=!0},p(p,k){p[0]==="edit"&&p[16]>0?g?g.p(p,k):(g=Kn(p),g.c(),g.m(a,d)):g&&(g.d(1),g=null),p[11]?h?(h.p(p,k),k&2048&&We(h,1)):(h=Qn(p),h.c(),We(h,1),h.m(e,null)):h&&(zi(),je(h,1,1,()=>{h=null}),$i()),(!m||k&4&&f!==(f=p[2]?"waveform-"+p[2]:"unlabelled-audio"))&&Q(e,"data-testid",f)},i(p){m||(We(h),m=!0)},o(p){je(h),m=!1},d(p){p&&Ht(e),i[21](null),i[22](null),g&&g.d(),i[23](null),h&&h.d()}}}function ur(i){let e,t,n;return{c(){e=pe("audio"),Q(e,"class","standard-player svelte-1ark3ru"),Jn(e.src,t=i[1].url)||Q(e,"src",t),e.controls=!0,e.autoplay=n=i[7].autoplay},m(s,o){Nt(s,e,o)},p(s,o){o&2&&!Jn(e.src,t=s[1].url)&&Q(e,"src",t),o&128&&n!==(n=s[7].autoplay)&&(e.autoplay=n)},i:Zn,o:Zn,d(s){s&&Ht(e)}}}function cr(i){let e,t;return e=new Di({props:{size:"small",$$slots:{default:[dr]},$$scope:{ctx:i}}}),{c(){En(e.$$.fragment)},m(n,s){Rn(e,n,s),t=!0},p(n,s){const o={};s&1073741824&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(We(e.$$.fragment,n),t=!0)},o(n){je(e.$$.fragment,n),t=!1},d(n){Dn(e,n)}}}function Kn(i){let e,t=ce(i[16])+"",n;return{c(){e=pe("time"),n=or(t),Q(e,"id","trim-duration"),Q(e,"class","svelte-1ark3ru")},m(s,o){Nt(s,e,o),fe(e,n)},p(s,o){o&65536&&t!==(t=ce(s[16])+"")&&sr(n,t)},d(s){s&&Ht(e)}}}function Qn(i){let e,t,n,s,o;function r(l){i[24](l)}function u(l){i[25](l)}function a(l){i[26](l)}let d={container:i[10],waveform:i[11],playing:i[14],audio_duration:i[15],i18n:i[3],interactive:i[4],handle_trim_audio:i[18],show_redo:i[4],handle_reset_value:i[9],waveform_options:i[8],trim_region_settings:i[6],editable:i[5]};return i[0]!==void 0&&(d.mode=i[0]),i[16]!==void 0&&(d.trimDuration=i[16]),i[17]!==void 0&&(d.show_volume_slider=i[17]),e=new Ti({props:d}),st.push(()=>_n(e,"mode",r)),st.push(()=>_n(e,"trimDuration",u)),st.push(()=>_n(e,"show_volume_slider",a)),{c(){En(e.$$.fragment)},m(l,c){Rn(e,l,c),o=!0},p(l,c){const f={};c&1024&&(f.container=l[10]),c&2048&&(f.waveform=l[11]),c&16384&&(f.playing=l[14]),c&32768&&(f.audio_duration=l[15]),c&8&&(f.i18n=l[3]),c&16&&(f.interactive=l[4]),c&16&&(f.show_redo=l[4]),c&512&&(f.handle_reset_value=l[9]),c&256&&(f.waveform_options=l[8]),c&64&&(f.trim_region_settings=l[6]),c&32&&(f.editable=l[5]),!t&&c&1&&(t=!0,f.mode=l[0],hn(()=>t=!1)),!n&&c&65536&&(n=!0,f.trimDuration=l[16],hn(()=>n=!1)),!s&&c&131072&&(s=!0,f.show_volume_slider=l[17],hn(()=>s=!1)),e.$set(f)},i(l){o||(We(e.$$.fragment,l),o=!0)},o(l){je(e.$$.fragment,l),o=!1},d(l){Dn(e,l)}}}function dr(i){let e,t;return e=new Wt({}),{c(){En(e.$$.fragment)},m(n,s){Rn(e,n,s),t=!0},i(n){t||(We(e.$$.fragment,n),t=!0)},o(n){je(e.$$.fragment,n),t=!1},d(n){Dn(e,n)}}}function fr(i){let e,t,n,s;const o=[cr,ur,ar],r=[];function u(a,d){return a[1]===null?0:a[1].is_stream?1:2}return e=u(i),t=r[e]=o[e](i),{c(){t.c(),n=tr()},m(a,d){r[e].m(a,d),Nt(a,n,d),s=!0},p(a,[d]){let l=e;e=u(a),e===l?r[e].p(a,d):(zi(),je(r[l],1,1,()=>{r[l]=null}),$i(),t=r[e],t?t.p(a,d):(t=r[e]=o[e](a),t.c()),We(t,1),t.m(n.parentNode,n))},i(a){s||(We(t),s=!0)},o(a){je(t),s=!1},d(a){a&&Ht(n),r[e].d(a)}}}function hr(i,e,t){let n,{value:s=null}=e,{label:o}=e,{i18n:r}=e,{dispatch_blob:u=()=>Promise.resolve()}=e,{interactive:a=!1}=e,{editable:d=!0}=e,{trim_region_settings:l={}}=e,{waveform_settings:c}=e,{waveform_options:f}=e,{mode:m=""}=e,{handle_reset_value:g=()=>{}}=e,h,p,k=!1,E,v,S,C=0,P=!1;const R=lr(),M=()=>{t(11,p=ot.create({container:h,...c})),Tn(s?.url).then(b=>{if(b&&p)return p.load(b)})},D=async(b,N)=>{t(0,m="");const B=p?.getDecodedData();B&&await gn(B,b,N,c.sampleRate).then(async L=>{await u([L],"change"),p?.destroy(),t(10,h.innerHTML="",h)}),R("edit")};async function A(b){await Tn(b).then(N=>{if(!(!N||s?.is_stream))return p?.load(N)})}rr(()=>{window.addEventListener("keydown",b=>{!p||P||(b.key==="ArrowRight"&&m!=="edit"?Pt(p,.1):b.key==="ArrowLeft"&&m!=="edit"&&Pt(p,-.1))})});function W(b){st[b?"unshift":"push"](()=>{h=b,t(10,h),t(11,p)})}function z(b){st[b?"unshift":"push"](()=>{E=b,t(12,E),t(11,p)})}function O(b){st[b?"unshift":"push"](()=>{v=b,t(13,v),t(11,p)})}function I(b){m=b,t(0,m)}function $(b){C=b,t(16,C)}function T(b){P=b,t(17,P)}return i.$$set=b=>{"value"in b&&t(1,s=b.value),"label"in b&&t(2,o=b.label),"i18n"in b&&t(3,r=b.i18n),"dispatch_blob"in b&&t(19,u=b.dispatch_blob),"interactive"in b&&t(4,a=b.interactive),"editable"in b&&t(5,d=b.editable),"trim_region_settings"in b&&t(6,l=b.trim_region_settings),"waveform_settings"in b&&t(7,c=b.waveform_settings),"waveform_options"in b&&t(8,f=b.waveform_options),"mode"in b&&t(0,m=b.mode),"handle_reset_value"in b&&t(9,g=b.handle_reset_value)},i.$$.update=()=>{i.$$.dirty&2&&t(20,n=s?.url),i.$$.dirty&3072&&h!==void 0&&(p!==void 0&&p.destroy(),t(10,h.innerHTML="",h),M(),t(14,k=!1)),i.$$.dirty&10240&&p?.on("decode",b=>{t(15,S=b),v&&t(13,v.textContent=ce(b),v)}),i.$$.dirty&6144&&p?.on("timeupdate",b=>E&&t(12,E.textContent=ce(b),E)),i.$$.dirty&2176&&p?.on("ready",()=>{c.autoplay?p?.play():p?.stop()}),i.$$.dirty&2048&&p?.on("finish",()=>{t(14,k=!1),R("stop")}),i.$$.dirty&2048&&p?.on("pause",()=>{t(14,k=!1),R("pause")}),i.$$.dirty&2048&&p?.on("play",()=>{t(14,k=!0),R("play")}),i.$$.dirty&1048576&&n&&A(n)},[m,s,o,r,a,d,l,c,f,g,h,p,E,v,k,S,C,P,D,u,n,W,z,O,I,$,T]}class _r extends er{constructor(e){super(),nr(this,e,hr,fr,ir,{value:1,label:2,i18n:3,dispatch_blob:19,interactive:4,editable:5,trim_region_settings:6,waveform_settings:7,waveform_options:8,mode:0,handle_reset_value:9})}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),de()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),de()}get i18n(){return this.$$.ctx[3]}set i18n(e){this.$$set({i18n:e}),de()}get dispatch_blob(){return this.$$.ctx[19]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),de()}get interactive(){return this.$$.ctx[4]}set interactive(e){this.$$set({interactive:e}),de()}get editable(){return this.$$.ctx[5]}set editable(e){this.$$set({editable:e}),de()}get trim_region_settings(){return this.$$.ctx[6]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),de()}get waveform_settings(){return this.$$.ctx[7]}set waveform_settings(e){this.$$set({waveform_settings:e}),de()}get waveform_options(){return this.$$.ctx[8]}set waveform_options(e){this.$$set({waveform_options:e}),de()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),de()}get handle_reset_value(){return this.$$.ctx[9]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),de()}}const Wi=_r,{SvelteComponent:mr,append:gr,attr:pr,bubble:dt,check_outros:pn,create_component:Ye,destroy_component:Ze,detach:At,element:vr,empty:br,flush:ge,group_outros:vn,init:wr,insert:Tt,mount_component:Je,safe_not_equal:kr,space:bn,transition_in:ee,transition_out:oe}=window.__gradio__svelte__internal,{createEventDispatcher:yr}=window.__gradio__svelte__internal;function Cr(i){let e,t;return e=new Di({props:{size:"small",$$slots:{default:[Dr]},$$scope:{ctx:i}}}),{c(){Ye(e.$$.fragment)},m(n,s){Je(e,n,s),t=!0},p(n,s){const o={};s&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(ee(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function Er(i){let e,t,n,s,o,r=i[3]&&xn(i),u=i[4]&&ei(i);return s=new Wi({props:{value:i[0],label:i[1],i18n:i[5],waveform_settings:i[6],waveform_options:i[7],editable:i[8]}}),s.$on("pause",i[12]),s.$on("play",i[13]),s.$on("stop",i[14]),{c(){e=vr("div"),r&&r.c(),t=bn(),u&&u.c(),n=bn(),Ye(s.$$.fragment),pr(e,"class","icon-buttons svelte-rvdo70")},m(a,d){Tt(a,e,d),r&&r.m(e,null),gr(e,t),u&&u.m(e,null),Tt(a,n,d),Je(s,a,d),o=!0},p(a,d){a[3]?r?(r.p(a,d),d&8&&ee(r,1)):(r=xn(a),r.c(),ee(r,1),r.m(e,t)):r&&(vn(),oe(r,1,1,()=>{r=null}),pn()),a[4]?u?(u.p(a,d),d&16&&ee(u,1)):(u=ei(a),u.c(),ee(u,1),u.m(e,null)):u&&(vn(),oe(u,1,1,()=>{u=null}),pn());const l={};d&1&&(l.value=a[0]),d&2&&(l.label=a[1]),d&32&&(l.i18n=a[5]),d&64&&(l.waveform_settings=a[6]),d&128&&(l.waveform_options=a[7]),d&256&&(l.editable=a[8]),s.$set(l)},i(a){o||(ee(r),ee(u),ee(s.$$.fragment,a),o=!0)},o(a){oe(r),oe(u),oe(s.$$.fragment,a),o=!1},d(a){a&&(At(e),At(n)),r&&r.d(),u&&u.d(),Ze(s,a)}}}function Dr(i){let e,t;return e=new Wt({}),{c(){Ye(e.$$.fragment)},m(n,s){Je(e,n,s),t=!0},i(n){t||(ee(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function xn(i){let e,t;return e=new os({props:{href:i[0].url,download:i[0].orig_name||i[0].path,$$slots:{default:[Rr]},$$scope:{ctx:i}}}),{c(){Ye(e.$$.fragment)},m(n,s){Je(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.href=n[0].url),s&1&&(o.download=n[0].orig_name||n[0].path),s&65568&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(ee(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function Rr(i){let e,t;return e=new ns({props:{Icon:rs,label:i[5]("common.download")}}),{c(){Ye(e.$$.fragment)},m(n,s){Je(e,n,s),t=!0},p(n,s){const o={};s&32&&(o.label=n[5]("common.download")),e.$set(o)},i(n){t||(ee(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function ei(i){let e,t;return e=new ss({props:{i18n:i[5],formatter:i[9],value:i[0]}}),e.$on("error",i[10]),e.$on("share",i[11]),{c(){Ye(e.$$.fragment)},m(n,s){Je(e,n,s),t=!0},p(n,s){const o={};s&32&&(o.i18n=n[5]),s&1&&(o.value=n[0]),e.$set(o)},i(n){t||(ee(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function Sr(i){let e,t,n,s,o,r;e=new Ei({props:{show_label:i[2],Icon:Wt,float:!1,label:i[1]||i[5]("audio.audio")}});const u=[Er,Cr],a=[];function d(l,c){return l[0]!==null?0:1}return n=d(i),s=a[n]=u[n](i),{c(){Ye(e.$$.fragment),t=bn(),s.c(),o=br()},m(l,c){Je(e,l,c),Tt(l,t,c),a[n].m(l,c),Tt(l,o,c),r=!0},p(l,[c]){const f={};c&4&&(f.show_label=l[2]),c&34&&(f.label=l[1]||l[5]("audio.audio")),e.$set(f);let m=n;n=d(l),n===m?a[n].p(l,c):(vn(),oe(a[m],1,1,()=>{a[m]=null}),pn(),s=a[n],s?s.p(l,c):(s=a[n]=u[n](l),s.c()),ee(s,1),s.m(o.parentNode,o))},i(l){r||(ee(e.$$.fragment,l),ee(s),r=!0)},o(l){oe(e.$$.fragment,l),oe(s),r=!1},d(l){l&&(At(t),At(o)),Ze(e,l),a[n].d(l)}}}function Lr(i,e,t){let{value:n=null}=e,{label:s}=e,{show_label:o=!0}=e,{show_download_button:r=!0}=e,{show_share_button:u=!1}=e,{i18n:a}=e,{waveform_settings:d}=e,{waveform_options:l}=e,{editable:c=!0}=e;const f=yr(),m=async v=>v?`<audio controls src="${await is(v.url,"url")}"></audio>`:"";function g(v){dt.call(this,i,v)}function h(v){dt.call(this,i,v)}function p(v){dt.call(this,i,v)}function k(v){dt.call(this,i,v)}function E(v){dt.call(this,i,v)}return i.$$set=v=>{"value"in v&&t(0,n=v.value),"label"in v&&t(1,s=v.label),"show_label"in v&&t(2,o=v.show_label),"show_download_button"in v&&t(3,r=v.show_download_button),"show_share_button"in v&&t(4,u=v.show_share_button),"i18n"in v&&t(5,a=v.i18n),"waveform_settings"in v&&t(6,d=v.waveform_settings),"waveform_options"in v&&t(7,l=v.waveform_options),"editable"in v&&t(8,c=v.editable)},i.$$.update=()=>{i.$$.dirty&1&&n&&f("change",n)},[n,s,o,r,u,a,d,l,c,m,g,h,p,k,E]}class Mr extends mr{constructor(e){super(),wr(this,e,Lr,Sr,kr,{value:0,label:1,show_label:2,show_download_button:3,show_share_button:4,i18n:5,waveform_settings:6,waveform_options:7,editable:8})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ge()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),ge()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),ge()}get show_download_button(){return this.$$.ctx[3]}set show_download_button(e){this.$$set({show_download_button:e}),ge()}get show_share_button(){return this.$$.ctx[4]}set show_share_button(e){this.$$set({show_share_button:e}),ge()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),ge()}get waveform_settings(){return this.$$.ctx[6]}set waveform_settings(e){this.$$set({waveform_settings:e}),ge()}get waveform_options(){return this.$$.ctx[7]}set waveform_options(e){this.$$set({waveform_options:e}),ge()}get editable(){return this.$$.ctx[8]}set editable(e){this.$$set({editable:e}),ge()}}const Pr=Mr;function mn(i,e,t,n){return new(t||(t=Promise))(function(s,o){function r(d){try{a(n.next(d))}catch(l){o(l)}}function u(d){try{a(n.throw(d))}catch(l){o(l)}}function a(d){var l;d.done?s(d.value):(l=d.value,l instanceof t?l:new t(function(c){c(l)})).then(r,u)}a((n=n.apply(i,e||[])).next())})}class Ar{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const s=()=>{this.removeEventListener(e,s),this.removeEventListener(e,t)};return this.addEventListener(e,s),s}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}}class Tr extends Ar{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const $r=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class kt extends Tr{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new kt(e||{})}renderMicStream(e){const t=new AudioContext,n=t.createMediaStreamSource(e),s=t.createAnalyser();n.connect(s);const o=s.frequencyBinCount,r=new Float32Array(o),u=o/t.sampleRate;let a;const d=()=>{s.getFloatTimeDomainData(r),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[r],u)),a=requestAnimationFrame(d)};return d(),()=>{cancelAnimationFrame(a),n?.disconnect(),t?.close()}}startMic(e){return mn(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const n=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",n)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return mn(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),n=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||$r.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=n,this.stopRecording();const s=[];n.ondataavailable=o=>{o.data.size>0&&s.push(o.data)},n.onstop=()=>{var o;const r=new Blob(s,{type:n.mimeType});this.emit("record-end",r),this.options.renderRecordedAudio!==!1&&((o=this.wavesurfer)===null||o===void 0||o.load(URL.createObjectURL(r)))},n.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return mn(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:zr,append:Oi,attr:ti,destroy_each:Wr,detach:Vt,element:Sn,empty:Or,ensure_array_like:ni,flush:ii,init:Br,insert:qt,noop:si,safe_not_equal:Hr,set_data:Bi,set_input_value:wn,text:Hi}=window.__gradio__svelte__internal,{createEventDispatcher:Nr}=window.__gradio__svelte__internal;function oi(i,e,t){const n=i.slice();return n[3]=e[t],n}function Vr(i){let e,t=ni(i[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ri(oi(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Or()},m(s,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,o);qt(s,e,o)},p(s,o){if(o&1){t=ni(s[0]);let r;for(r=0;r<t.length;r+=1){const u=oi(s,t,r);n[r]?n[r].p(u,o):(n[r]=ri(u),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(s){s&&Vt(e),Wr(n,s)}}}function qr(i){let e,t=i[1]("audio.no_microphone")+"",n;return{c(){e=Sn("option"),n=Hi(t),e.__value="",wn(e,e.__value)},m(s,o){qt(s,e,o),Oi(e,n)},p(s,o){o&2&&t!==(t=s[1]("audio.no_microphone")+"")&&Bi(n,t)},d(s){s&&Vt(e)}}}function ri(i){let e,t=i[3].label+"",n,s;return{c(){e=Sn("option"),n=Hi(t),e.__value=s=i[3].deviceId,wn(e,e.__value)},m(o,r){qt(o,e,r),Oi(e,n)},p(o,r){r&1&&t!==(t=o[3].label+"")&&Bi(n,t),r&1&&s!==(s=o[3].deviceId)&&(e.__value=s,wn(e,e.__value))},d(o){o&&Vt(e)}}}function Ir(i){let e,t;function n(r,u){return r[0].length===0?qr:Vr}let s=n(i),o=s(i);return{c(){e=Sn("select"),o.c(),ti(e,"class","mic-select svelte-1v4948z"),ti(e,"aria-label","Select input device"),e.disabled=t=i[0].length===0},m(r,u){qt(r,e,u),o.m(e,null)},p(r,[u]){s===(s=n(r))&&o?o.p(r,u):(o.d(1),o=s(r),o&&(o.c(),o.m(e,null))),u&1&&t!==(t=r[0].length===0)&&(e.disabled=t)},i:si,o:si,d(r){r&&Vt(e),o.d()}}}function jr(i,e,t){let{i18n:n}=e,{micDevices:s=[]}=e;const o=Nr();return i.$$set=r=>{"i18n"in r&&t(1,n=r.i18n),"micDevices"in r&&t(0,s=r.micDevices)},i.$$.update=()=>{if(i.$$.dirty&2)try{let r=[];kt.getAvailableAudioDevices().then(u=>{t(0,s=u),u.forEach(a=>{a.deviceId&&r.push(a)}),t(0,s=r)})}catch(r){throw r instanceof DOMException&&r.name=="NotAllowedError"&&o("error",n("audio.allow_recording_access")),r}},[s,n]}class Ni extends zr{constructor(e){super(),Br(this,e,jr,Ir,Hr,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),ii()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),ii()}}const{SvelteComponent:Ur,add_flush_callback:Fr,append:Z,attr:he,bind:Xr,binding_callbacks:et,create_component:li,destroy_component:ai,detach:Vi,element:Re,flush:ft,init:Gr,insert:qi,listen:ht,mount_component:ui,run_all:Yr,safe_not_equal:Zr,set_data:_t,space:xe,text:mt,transition_in:ci,transition_out:di}=window.__gradio__svelte__internal;function fi(i){let e,t;return{c(){e=Re("time"),t=mt(i[2]),he(e,"class","duration-button duration svelte-1d9m1oy")},m(n,s){qi(n,e,s),Z(e,t)},p(n,s){s&4&&_t(t,n[2])},d(n){n&&Vi(e)}}}function Jr(i){let e,t,n,s=i[1]("audio.record")+"",o,r,u,a=i[1]("audio.stop")+"",d,l,c,f,m=i[1]("audio.stop")+"",g,h,p,k,E,v,S=i[1]("audio.resume")+"",C,P,R,M,D,A,W,z;k=new Ri({});let O=i[4]&&!i[3]&&fi(i);function I(T){i[21](T)}let $={i18n:i[1]};return i[5]!==void 0&&($.micDevices=i[5]),M=new Ni({props:$}),et.push(()=>Xr(M,"micDevices",I)),{c(){e=Re("div"),t=Re("div"),n=Re("button"),o=mt(s),r=xe(),u=Re("button"),d=mt(a),c=xe(),f=Re("button"),g=mt(m),h=xe(),p=Re("button"),li(k.$$.fragment),E=xe(),v=Re("button"),C=mt(S),P=xe(),O&&O.c(),R=xe(),li(M.$$.fragment),he(n,"class","record record-button svelte-1d9m1oy"),he(u,"class",l="stop-button "+(i[0].isPaused()?"stop-button-paused":"")+" svelte-1d9m1oy"),he(f,"id","stop-paused"),he(f,"class","stop-button-paused svelte-1d9m1oy"),he(p,"aria-label","pause"),he(p,"class","pause-button svelte-1d9m1oy"),he(v,"class","resume-button svelte-1d9m1oy"),he(t,"class","wrapper svelte-1d9m1oy"),he(e,"class","controls svelte-1d9m1oy")},m(T,b){qi(T,e,b),Z(e,t),Z(t,n),Z(n,o),i[11](n),Z(t,r),Z(t,u),Z(u,d),i[13](u),Z(t,c),Z(t,f),Z(f,g),i[15](f),Z(t,h),Z(t,p),ui(k,p,null),i[17](p),Z(t,E),Z(t,v),Z(v,C),i[19](v),Z(t,P),O&&O.m(t,null),Z(e,R),ui(M,e,null),A=!0,W||(z=[ht(n,"click",i[12]),ht(u,"click",i[14]),ht(f,"click",i[16]),ht(p,"click",i[18]),ht(v,"click",i[20])],W=!0)},p(T,[b]){(!A||b&2)&&s!==(s=T[1]("audio.record")+"")&&_t(o,s),(!A||b&2)&&a!==(a=T[1]("audio.stop")+"")&&_t(d,a),(!A||b&1&&l!==(l="stop-button "+(T[0].isPaused()?"stop-button-paused":"")+" svelte-1d9m1oy"))&&he(u,"class",l),(!A||b&2)&&m!==(m=T[1]("audio.stop")+"")&&_t(g,m),(!A||b&2)&&S!==(S=T[1]("audio.resume")+"")&&_t(C,S),T[4]&&!T[3]?O?O.p(T,b):(O=fi(T),O.c(),O.m(t,null)):O&&(O.d(1),O=null);const N={};b&2&&(N.i18n=T[1]),!D&&b&32&&(D=!0,N.micDevices=T[5],Fr(()=>D=!1)),M.$set(N)},i(T){A||(ci(k.$$.fragment,T),ci(M.$$.fragment,T),A=!0)},o(T){di(k.$$.fragment,T),di(M.$$.fragment,T),A=!1},d(T){T&&Vi(e),i[11](null),i[13](null),i[15](null),ai(k),i[17](null),i[19](null),O&&O.d(),ai(M),W=!1,Yr(z)}}}function Kr(i,e,t){let{record:n}=e,{i18n:s}=e,o=[],r,u,a,d,l,{record_time:c}=e,{show_recording_waveform:f}=e,{timing:m=!1}=e;function g(D){et[D?"unshift":"push"](()=>{r=D,t(6,r),t(0,n)})}const h=()=>n.startRecording();function p(D){et[D?"unshift":"push"](()=>{d=D,t(9,d),t(0,n)})}const k=()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopRecording()};function E(D){et[D?"unshift":"push"](()=>{l=D,t(10,l),t(0,n)})}const v=()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopRecording()};function S(D){et[D?"unshift":"push"](()=>{u=D,t(7,u),t(0,n)})}const C=()=>n.pauseRecording();function P(D){et[D?"unshift":"push"](()=>{a=D,t(8,a),t(0,n)})}const R=()=>n.resumeRecording();function M(D){o=D,t(5,o)}return i.$$set=D=>{"record"in D&&t(0,n=D.record),"i18n"in D&&t(1,s=D.i18n),"record_time"in D&&t(2,c=D.record_time),"show_recording_waveform"in D&&t(3,f=D.show_recording_waveform),"timing"in D&&t(4,m=D.timing)},i.$$.update=()=>{i.$$.dirty&1&&n.on("record-start",()=>{n.startMic(),t(6,r.style.display="none",r),t(9,d.style.display="flex",d),t(7,u.style.display="block",u)}),i.$$.dirty&1&&n.on("record-end",()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopMic(),t(6,r.style.display="flex",r),t(9,d.style.display="none",d),t(7,u.style.display="none",u),t(6,r.disabled=!1,r)}),i.$$.dirty&1&&n.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,a.style.display="block",a),t(9,d.style.display="none",d),t(10,l.style.display="flex",l)}),i.$$.dirty&1&&n.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,a.style.display="none",a),t(6,r.style.display="none",r),t(9,d.style.display="flex",d),t(10,l.style.display="none",l)})},[n,s,c,f,m,o,r,u,a,d,l,g,h,p,k,E,v,S,C,P,R,M]}class Qr extends Ur{constructor(e){super(),Gr(this,e,Kr,Jr,Zr,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),ft()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),ft()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),ft()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),ft()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),ft()}}const{SvelteComponent:xr,add_flush_callback:Lt,append:ue,attr:be,bind:Mt,binding_callbacks:Me,check_outros:hi,create_component:Ii,destroy_component:ji,detach:yt,element:we,flush:Ne,group_outros:_i,init:el,insert:Ct,mount_component:Ui,noop:tl,safe_not_equal:nl,set_data:Fi,space:nt,text:Xi,transition_in:Le,transition_out:it}=window.__gradio__svelte__internal,{onMount:il}=window.__gradio__svelte__internal,{createEventDispatcher:sl}=window.__gradio__svelte__internal;function mi(i){let e,t,n,s,o,r=i[0]==="edit"&&i[16]>0&&gi(i);function u(l,c){return l[15]?rl:ol}let a=u(i),d=a(i);return{c(){e=we("div"),t=we("time"),t.textContent="0:00",n=nt(),s=we("div"),r&&r.c(),o=nt(),d.c(),be(t,"class","time svelte-9n45fh"),be(e,"class","timestamps svelte-9n45fh")},m(l,c){Ct(l,e,c),ue(e,t),i[23](t),ue(e,n),ue(e,s),r&&r.m(s,null),ue(s,o),d.m(s,null)},p(l,c){l[0]==="edit"&&l[16]>0?r?r.p(l,c):(r=gi(l),r.c(),r.m(s,o)):r&&(r.d(1),r=null),a===(a=u(l))&&d?d.p(l,c):(d.d(1),d=a(l),d&&(d.c(),d.m(s,null)))},d(l){l&&yt(e),i[23](null),r&&r.d(),d.d()}}}function gi(i){let e,t=ce(i[16])+"",n;return{c(){e=we("time"),n=Xi(t),be(e,"class","trim-duration svelte-9n45fh")},m(s,o){Ct(s,e,o),ue(e,n)},p(s,o){o[0]&65536&&t!==(t=ce(s[16])+"")&&Fi(n,t)},d(s){s&&yt(e)}}}function ol(i){let e;return{c(){e=we("time"),e.textContent="0:00",be(e,"class","duration svelte-9n45fh")},m(t,n){Ct(t,e,n),i[24](e)},p:tl,d(t){t&&yt(e),i[24](null)}}}function rl(i){let e,t=ce(i[14])+"",n;return{c(){e=we("time"),n=Xi(t),be(e,"class","duration svelte-9n45fh")},m(s,o){Ct(s,e,o),ue(e,n)},p(s,o){o[0]&16384&&t!==(t=ce(s[14])+"")&&Fi(n,t)},d(s){s&&yt(e)}}}function pi(i){let e,t,n;function s(r){i[25](r)}let o={i18n:i[1],timing:i[15],show_recording_waveform:i[2].show_recording_waveform,record_time:ce(i[14])};return i[8]!==void 0&&(o.record=i[8]),e=new Qr({props:o}),Me.push(()=>Mt(e,"record",s)),{c(){Ii(e.$$.fragment)},m(r,u){Ui(e,r,u),n=!0},p(r,u){const a={};u[0]&2&&(a.i18n=r[1]),u[0]&32768&&(a.timing=r[15]),u[0]&4&&(a.show_recording_waveform=r[2].show_recording_waveform),u[0]&16384&&(a.record_time=ce(r[14])),!t&&u[0]&256&&(t=!0,a.record=r[8],Lt(()=>t=!1)),e.$set(a)},i(r){n||(Le(e.$$.fragment,r),n=!0)},o(r){it(e.$$.fragment,r),n=!1},d(r){ji(e,r)}}}function vi(i){let e,t,n,s,o;function r(l){i[26](l)}function u(l){i[27](l)}function a(l){i[28](l)}let d={container:i[6],playing:i[12],audio_duration:i[13],i18n:i[1],editable:i[4],interactive:!0,handle_trim_audio:i[17],show_redo:!0,handle_reset_value:i[3],waveform_options:i[2]};return i[5]!==void 0&&(d.waveform=i[5]),i[16]!==void 0&&(d.trimDuration=i[16]),i[0]!==void 0&&(d.mode=i[0]),e=new Ti({props:d}),Me.push(()=>Mt(e,"waveform",r)),Me.push(()=>Mt(e,"trimDuration",u)),Me.push(()=>Mt(e,"mode",a)),{c(){Ii(e.$$.fragment)},m(l,c){Ui(e,l,c),o=!0},p(l,c){const f={};c[0]&64&&(f.container=l[6]),c[0]&4096&&(f.playing=l[12]),c[0]&8192&&(f.audio_duration=l[13]),c[0]&2&&(f.i18n=l[1]),c[0]&16&&(f.editable=l[4]),c[0]&8&&(f.handle_reset_value=l[3]),c[0]&4&&(f.waveform_options=l[2]),!t&&c[0]&32&&(t=!0,f.waveform=l[5],Lt(()=>t=!1)),!n&&c[0]&65536&&(n=!0,f.trimDuration=l[16],Lt(()=>n=!1)),!s&&c[0]&1&&(s=!0,f.mode=l[0],Lt(()=>s=!1)),e.$set(f)},i(l){o||(Le(e.$$.fragment,l),o=!0)},o(l){it(e.$$.fragment,l),o=!1},d(l){ji(e,l)}}}function ll(i){let e,t,n,s,o,r,u,a,d=(i[15]||i[9])&&i[2].show_recording_waveform&&mi(i),l=i[7]&&!i[9]&&pi(i),c=i[5]&&i[9]&&vi(i);return{c(){e=we("div"),t=we("div"),n=nt(),s=we("div"),o=nt(),d&&d.c(),r=nt(),l&&l.c(),u=nt(),c&&c.c(),be(t,"class","microphone svelte-9n45fh"),be(t,"data-testid","microphone-waveform"),be(s,"data-testid","recording-waveform"),be(e,"class","component-wrapper svelte-9n45fh")},m(f,m){Ct(f,e,m),ue(e,t),i[21](t),ue(e,n),ue(e,s),i[22](s),ue(e,o),d&&d.m(e,null),ue(e,r),l&&l.m(e,null),ue(e,u),c&&c.m(e,null),a=!0},p(f,m){(f[15]||f[9])&&f[2].show_recording_waveform?d?d.p(f,m):(d=mi(f),d.c(),d.m(e,r)):d&&(d.d(1),d=null),f[7]&&!f[9]?l?(l.p(f,m),m[0]&640&&Le(l,1)):(l=pi(f),l.c(),Le(l,1),l.m(e,u)):l&&(_i(),it(l,1,1,()=>{l=null}),hi()),f[5]&&f[9]?c?(c.p(f,m),m[0]&544&&Le(c,1)):(c=vi(f),c.c(),Le(c,1),c.m(e,null)):c&&(_i(),it(c,1,1,()=>{c=null}),hi())},i(f){a||(Le(l),Le(c),a=!0)},o(f){it(l),it(c),a=!1},d(f){f&&yt(e),i[21](null),i[22](null),d&&d.d(),l&&l.d(),c&&c.d()}}}function al(i,e,t){let{mode:n}=e,{i18n:s}=e,{dispatch_blob:o}=e,{waveform_settings:r}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:a}=e,{editable:d=!0}=e,l,c,f=!1,m,g,h,p=null,k,E,v,S=0,C,P=!1,R=0;const M=()=>{clearInterval(C),t(20,C=setInterval(()=>{t(14,S++,S)},1e3))},D=sl(),A=()=>{g&&t(7,g.innerHTML="",g),l!==void 0&&l.destroy(),g&&(l=ot.create({...r,normalize:!1,container:g}),t(8,h=l.registerPlugin(kt.create())),h.startMic())},W=()=>{let w=m;!p||!w||t(5,c=ot.create({container:w,url:p,...r}))},z=async(w,X)=>{t(0,n="edit");const y=c.getDecodedData();y&&await gn(y,w,X).then(async J=>{await o([J],"change"),await o([J],"stop_recording"),c.destroy(),W()}),D("edit")};il(()=>{A(),window.addEventListener("keydown",w=>{w.key==="ArrowRight"?Pt(c,.1):w.key==="ArrowLeft"&&Pt(c,-.1)})});function O(w){Me[w?"unshift":"push"](()=>{g=w,t(7,g)})}function I(w){Me[w?"unshift":"push"](()=>{m=w,t(6,m)})}function $(w){Me[w?"unshift":"push"](()=>{k=w,t(10,k),t(5,c)})}function T(w){Me[w?"unshift":"push"](()=>{E=w,t(11,E),t(5,c)})}function b(w){h=w,t(8,h)}function N(w){c=w,t(5,c)}function B(w){R=w,t(16,R)}function L(w){n=w,t(0,n)}return i.$$set=w=>{"mode"in w&&t(0,n=w.mode),"i18n"in w&&t(1,s=w.i18n),"dispatch_blob"in w&&t(18,o=w.dispatch_blob),"waveform_settings"in w&&t(19,r=w.waveform_settings),"waveform_options"in w&&t(2,u=w.waveform_options),"handle_reset_value"in w&&t(3,a=w.handle_reset_value),"editable"in w&&t(4,d=w.editable)},i.$$.update=()=>{i.$$.dirty[0]&388&&h?.on("record-start",()=>{if(M(),t(15,P=!0),D("start_recording"),u.show_recording_waveform){let w=g;w&&(w.style.display="block")}}),i.$$.dirty[0]&1835264&&h?.on("record-end",async w=>{t(14,S=0),t(15,P=!1),clearInterval(C);try{const X=await w.arrayBuffer(),J=await new AudioContext({sampleRate:r.sampleRate}).decodeAudioData(X);J&&await gn(J).then(async re=>{await o([re],"change"),await o([re],"stop_recording")})}catch(X){console.error(X)}}),i.$$.dirty[0]&1048832&&h?.on("record-pause",()=>{D("pause_recording"),clearInterval(C)}),i.$$.dirty[0]&256&&h?.on("record-resume",()=>{M()}),i.$$.dirty[0]&2080&&c?.on("decode",w=>{t(13,v=w),E&&t(11,E.textContent=ce(w),E)}),i.$$.dirty[0]&1056&&c?.on("timeupdate",w=>k&&t(10,k.textContent=ce(w),k)),i.$$.dirty[0]&32&&c?.on("pause",()=>{D("pause"),t(12,f=!1)}),i.$$.dirty[0]&32&&c?.on("play",()=>{D("play"),t(12,f=!0)}),i.$$.dirty[0]&32&&c?.on("finish",()=>{D("stop"),t(12,f=!1)}),i.$$.dirty[0]&960&&h?.on("record-end",w=>{t(9,p=URL.createObjectURL(w));const X=g,y=m;X&&(X.style.display="none"),y&&p&&(y.innerHTML="",W())})},[n,s,u,a,d,c,m,g,h,p,k,E,f,v,S,P,R,z,o,r,C,O,I,$,T,b,N,B,L]}class ul extends xr{constructor(e){super(),el(this,e,al,ll,nl,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),Ne()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Ne()}get dispatch_blob(){return this.$$.ctx[18]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),Ne()}get waveform_settings(){return this.$$.ctx[19]}set waveform_settings(e){this.$$set({waveform_settings:e}),Ne()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),Ne()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),Ne()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),Ne()}}const{SvelteComponent:cl,add_flush_callback:dl,append:ke,attr:Ie,bind:fl,binding_callbacks:Gi,create_component:hl,destroy_component:_l,detach:It,element:Ue,flush:Ve,init:ml,insert:jt,listen:Yi,mount_component:gl,null_to_empty:bi,safe_not_equal:pl,set_data:Zi,set_style:wi,space:$t,text:Ji,transition_in:vl,transition_out:bl}=window.__gradio__svelte__internal,{onMount:wl}=window.__gradio__svelte__internal;function ki(i){let e;return{c(){e=Ue("div"),wi(e,"display",i[0]?"block":"none")},m(t,n){jt(t,e,n),i[10](e)},p(t,n){n&1&&wi(e,"display",t[0]?"block":"none")},d(t){t&&It(e),i[10](null)}}}function kl(i){let e,t,n,s=i[4]("audio.record")+"",o,r,u;return{c(){e=Ue("button"),t=Ue("span"),t.innerHTML='<span class="dot"></span>',n=$t(),o=Ji(s),Ie(t,"class","record-icon"),Ie(e,"class","record-button svelte-1m31gsz")},m(a,d){jt(a,e,d),ke(e,t),ke(e,n),ke(e,o),r||(u=Yi(e,"click",i[12]),r=!0)},p(a,d){d&16&&s!==(s=a[4]("audio.record")+"")&&Zi(o,s)},d(a){a&&It(e),r=!1,u()}}}function yl(i){let e,t,n,s=(i[1]?i[4]("audio.pause"):i[4]("audio.stop"))+"",o,r,u,a;return{c(){e=Ue("button"),t=Ue("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',n=$t(),o=Ji(s),Ie(t,"class","record-icon"),Ie(e,"class",r=bi(i[1]?"stop-button-paused":"stop-button")+" svelte-1m31gsz")},m(d,l){jt(d,e,l),ke(e,t),ke(e,n),ke(e,o),u||(a=Yi(e,"click",i[11]),u=!0)},p(d,l){l&18&&s!==(s=(d[1]?d[4]("audio.pause"):d[4]("audio.stop"))+"")&&Zi(o,s),l&2&&r!==(r=bi(d[1]?"stop-button-paused":"stop-button")+" svelte-1m31gsz")&&Ie(e,"class",r)},d(d){d&&It(e),u=!1,a()}}}function Cl(i){let e,t,n,s,o,r,u,a=i[5].show_recording_waveform&&ki(i);function d(g,h){return g[0]?yl:kl}let l=d(i),c=l(i);function f(g){i[13](g)}let m={i18n:i[4]};return i[8]!==void 0&&(m.micDevices=i[8]),o=new Ni({props:m}),Gi.push(()=>fl(o,"micDevices",f)),{c(){e=Ue("div"),a&&a.c(),t=$t(),n=Ue("div"),c.c(),s=$t(),hl(o.$$.fragment),Ie(n,"class","controls svelte-1m31gsz"),Ie(e,"class","mic-wrap svelte-1m31gsz")},m(g,h){jt(g,e,h),a&&a.m(e,null),ke(e,t),ke(e,n),c.m(n,null),ke(n,s),gl(o,n,null),u=!0},p(g,[h]){g[5].show_recording_waveform?a?a.p(g,h):(a=ki(g),a.c(),a.m(e,t)):a&&(a.d(1),a=null),l===(l=d(g))&&c?c.p(g,h):(c.d(1),c=l(g),c&&(c.c(),c.m(n,s)));const p={};h&16&&(p.i18n=g[4]),!r&&h&256&&(r=!0,p.micDevices=g[8],dl(()=>r=!1)),o.$set(p)},i(g){u||(vl(o.$$.fragment,g),u=!0)},o(g){bl(o.$$.fragment,g),u=!1},d(g){g&&It(e),a&&a.d(),c.d(),_l(o)}}}function El(i,e,t){let{recording:n=!1}=e,{paused_recording:s=!1}=e,{stop:o}=e,{record:r}=e,{i18n:u}=e,{waveform_settings:a}=e,{waveform_options:d={show_recording_waveform:!0}}=e,l,c,f,m=[];wl(()=>{g()});const g=()=>{l!==void 0&&l.destroy(),f&&(l=ot.create({...a,height:100,container:f}),t(6,c=l.registerPlugin(kt.create())))};function h(v){Gi[v?"unshift":"push"](()=>{f=v,t(7,f)})}const p=()=>{c?.stopMic(),o()},k=()=>{c?.startMic(),r()};function E(v){m=v,t(8,m)}return i.$$set=v=>{"recording"in v&&t(0,n=v.recording),"paused_recording"in v&&t(1,s=v.paused_recording),"stop"in v&&t(2,o=v.stop),"record"in v&&t(3,r=v.record),"i18n"in v&&t(4,u=v.i18n),"waveform_settings"in v&&t(9,a=v.waveform_settings),"waveform_options"in v&&t(5,d=v.waveform_options)},[n,s,o,r,u,d,c,f,m,a,h,p,k,E]}class Dl extends cl{constructor(e){super(),ml(this,e,El,Cl,pl,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:9,waveform_options:5})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),Ve()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),Ve()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),Ve()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),Ve()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),Ve()}get waveform_settings(){return this.$$.ctx[9]}set waveform_settings(e){this.$$set({waveform_settings:e}),Ve()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),Ve()}}const{SvelteComponent:Rl,add_flush_callback:Ut,append:Sl,attr:Ll,bind:Ft,binding_callbacks:Xt,bubble:qe,check_outros:Ln,create_component:Oe,create_slot:Ml,destroy_component:Be,detach:rt,element:Pl,empty:Ki,flush:Y,get_all_dirty_from_scope:Al,get_slot_changes:Tl,group_outros:Mn,init:$l,insert:lt,mount_component:He,safe_not_equal:zl,space:zt,transition_in:te,transition_out:ne,update_slot_base:Wl}=window.__gradio__svelte__internal,{getContext:Ol,onDestroy:Bl,createEventDispatcher:Hl}=window.__gradio__svelte__internal;function Nl(i){let e,t,n,s,o;e=new Si({props:{i18n:i[9],download:i[6]?i[1].url:null,absolute:!0}}),e.$on("clear",i[21]),e.$on("edit",i[35]);function r(a){i[36](a)}let u={value:i[1],label:i[3],i18n:i[9],dispatch_blob:i[19],waveform_settings:i[10],waveform_options:i[12],trim_region_settings:i[11],handle_reset_value:i[13],editable:i[14],interactive:!0};return i[17]!==void 0&&(u.mode=i[17]),n=new Wi({props:u}),Xt.push(()=>Ft(n,"mode",r)),n.$on("stop",i[37]),n.$on("play",i[38]),n.$on("pause",i[39]),n.$on("edit",i[40]),{c(){Oe(e.$$.fragment),t=zt(),Oe(n.$$.fragment)},m(a,d){He(e,a,d),lt(a,t,d),He(n,a,d),o=!0},p(a,d){const l={};d[0]&512&&(l.i18n=a[9]),d[0]&66&&(l.download=a[6]?a[1].url:null),e.$set(l);const c={};d[0]&2&&(c.value=a[1]),d[0]&8&&(c.label=a[3]),d[0]&512&&(c.i18n=a[9]),d[0]&1024&&(c.waveform_settings=a[10]),d[0]&4096&&(c.waveform_options=a[12]),d[0]&2048&&(c.trim_region_settings=a[11]),d[0]&8192&&(c.handle_reset_value=a[13]),d[0]&16384&&(c.editable=a[14]),!s&&d[0]&131072&&(s=!0,c.mode=a[17],Ut(()=>s=!1)),n.$set(c)},i(a){o||(te(e.$$.fragment,a),te(n.$$.fragment,a),o=!0)},o(a){ne(e.$$.fragment,a),ne(n.$$.fragment,a),o=!1},d(a){a&&rt(t),Be(e,a),Be(n,a)}}}function Vl(i){let e,t,n,s;const o=[Il,ql],r=[];function u(a,d){return a[2]==="microphone"?0:a[2]==="upload"?1:-1}return~(e=u(i))&&(t=r[e]=o[e](i)),{c(){t&&t.c(),n=Ki()},m(a,d){~e&&r[e].m(a,d),lt(a,n,d),s=!0},p(a,d){let l=e;e=u(a),e===l?~e&&r[e].p(a,d):(t&&(Mn(),ne(r[l],1,1,()=>{r[l]=null}),Ln()),~e?(t=r[e],t?t.p(a,d):(t=r[e]=o[e](a),t.c()),te(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(te(t),s=!0)},o(a){ne(t),s=!1},d(a){a&&rt(n),~e&&r[e].d(a)}}}function ql(i){let e,t,n;function s(r){i[33](r)}let o={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:i[4],max_file_size:i[15],$$slots:{default:[jl]},$$scope:{ctx:i}};return i[0]!==void 0&&(o.dragging=i[0]),e=new fs({props:o}),Xt.push(()=>Ft(e,"dragging",s)),e.$on("load",i[22]),e.$on("error",i[34]),{c(){Oe(e.$$.fragment)},m(r,u){He(e,r,u),n=!0},p(r,u){const a={};u[0]&16&&(a.root=r[4]),u[0]&32768&&(a.max_file_size=r[15]),u[1]&2048&&(a.$$scope={dirty:u,ctx:r}),!t&&u[0]&1&&(t=!0,a.dragging=r[0],Ut(()=>t=!1)),e.$set(a)},i(r){n||(te(e.$$.fragment,r),n=!0)},o(r){ne(e.$$.fragment,r),n=!1},d(r){Be(e,r)}}}function Il(i){let e,t,n,s,o,r;e=new Si({props:{i18n:i[9],absolute:!0}}),e.$on("clear",i[21]);const u=[Fl,Ul],a=[];function d(l,c){return l[8]?0:1}return n=d(i),s=a[n]=u[n](i),{c(){Oe(e.$$.fragment),t=zt(),s.c(),o=Ki()},m(l,c){He(e,l,c),lt(l,t,c),a[n].m(l,c),lt(l,o,c),r=!0},p(l,c){const f={};c[0]&512&&(f.i18n=l[9]),e.$set(f);let m=n;n=d(l),n===m?a[n].p(l,c):(Mn(),ne(a[m],1,1,()=>{a[m]=null}),Ln(),s=a[n],s?s.p(l,c):(s=a[n]=u[n](l),s.c()),te(s,1),s.m(o.parentNode,o))},i(l){r||(te(e.$$.fragment,l),te(s),r=!0)},o(l){ne(e.$$.fragment,l),ne(s),r=!1},d(l){l&&(rt(t),rt(o)),Be(e,l),a[n].d(l)}}}function jl(i){let e;const t=i[28].default,n=Ml(t,i,i[42],null);return{c(){n&&n.c()},m(s,o){n&&n.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o[1]&2048)&&Wl(n,t,s,s[42],e?Tl(t,s[42],o,null):Al(s[42]),null)},i(s){e||(te(n,s),e=!0)},o(s){ne(n,s),e=!1},d(s){n&&n.d(s)}}}function Ul(i){let e,t,n;function s(r){i[29](r)}let o={i18n:i[9],editable:i[14],dispatch_blob:i[19],waveform_settings:i[10],waveform_options:i[12],handle_reset_value:i[13]};return i[17]!==void 0&&(o.mode=i[17]),e=new ul({props:o}),Xt.push(()=>Ft(e,"mode",s)),e.$on("start_recording",i[30]),e.$on("pause_recording",i[31]),e.$on("stop_recording",i[32]),{c(){Oe(e.$$.fragment)},m(r,u){He(e,r,u),n=!0},p(r,u){const a={};u[0]&512&&(a.i18n=r[9]),u[0]&16384&&(a.editable=r[14]),u[0]&1024&&(a.waveform_settings=r[10]),u[0]&4096&&(a.waveform_options=r[12]),u[0]&8192&&(a.handle_reset_value=r[13]),!t&&u[0]&131072&&(t=!0,a.mode=r[17],Ut(()=>t=!1)),e.$set(a)},i(r){n||(te(e.$$.fragment,r),n=!0)},o(r){ne(e.$$.fragment,r),n=!1},d(r){Be(e,r)}}}function Fl(i){let e,t;return e=new Dl({props:{record:i[20],recording:i[16],stop:i[23],i18n:i[9],waveform_settings:i[10],waveform_options:i[12]}}),{c(){Oe(e.$$.fragment)},m(n,s){He(e,n,s),t=!0},p(n,s){const o={};s[0]&65536&&(o.recording=n[16]),s[0]&512&&(o.i18n=n[9]),s[0]&1024&&(o.waveform_settings=n[10]),s[0]&4096&&(o.waveform_options=n[12]),e.$set(o)},i(n){t||(te(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Xl(i){let e,t,n,s,o,r,u,a,d;e=new Ei({props:{show_label:i[5],Icon:Wt,float:i[2]==="upload"&&i[1]===null,label:i[3]||i[9]("audio.audio")}});const l=[Vl,Nl],c=[];function f(h,p){return h[1]===null||h[8]?0:1}s=f(i),o=c[s]=l[s](i);function m(h){i[41](h)}let g={sources:i[7],handle_clear:i[21]};return i[2]!==void 0&&(g.active_source=i[2]),u=new hs({props:g}),Xt.push(()=>Ft(u,"active_source",m)),{c(){Oe(e.$$.fragment),t=zt(),n=Pl("div"),o.c(),r=zt(),Oe(u.$$.fragment),Ll(n,"class","audio-container svelte-cbyffp")},m(h,p){He(e,h,p),lt(h,t,p),lt(h,n,p),c[s].m(n,null),Sl(n,r),He(u,n,null),d=!0},p(h,p){const k={};p[0]&32&&(k.show_label=h[5]),p[0]&6&&(k.float=h[2]==="upload"&&h[1]===null),p[0]&520&&(k.label=h[3]||h[9]("audio.audio")),e.$set(k);let E=s;s=f(h),s===E?c[s].p(h,p):(Mn(),ne(c[E],1,1,()=>{c[E]=null}),Ln(),o=c[s],o?o.p(h,p):(o=c[s]=l[s](h),o.c()),te(o,1),o.m(n,r));const v={};p[0]&128&&(v.sources=h[7]),!a&&p[0]&4&&(a=!0,v.active_source=h[2],Ut(()=>a=!1)),u.$set(v)},i(h){d||(te(e.$$.fragment,h),te(o),te(u.$$.fragment,h),d=!0)},o(h){ne(e.$$.fragment,h),ne(o),ne(u.$$.fragment,h),d=!1},d(h){h&&(rt(t),rt(n)),Be(e,h),c[s].d(),Be(u)}}}const Gl=500,yi=44;function Yl(i,e,t){let{$$slots:n={},$$scope:s}=e,{value:o=null}=e,{label:r}=e,{root:u}=e,{show_label:a=!0}=e,{show_download_button:d=!1}=e,{sources:l=["microphone","upload"]}=e,{pending:c=!1}=e,{streaming:f=!1}=e,{i18n:m}=e,{waveform_settings:g}=e,{trim_region_settings:h={}}=e,{waveform_options:p={}}=e,{dragging:k}=e,{active_source:E}=e,{handle_reset_value:v=()=>{}}=e,{editable:S=!0}=e,{max_file_size:C=null}=e;const P=Ol("upload_files");let R=!1,M,D="",A,W=[],z=!1,O=!1,I=[],$;function T(){$=[$n(()=>import("./module-5sppuDsl.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),$n(()=>import("./module-BA06XY8_.js"),__vite__mapDeps([6,1]),import.meta.url)]}f&&T();const b=Hl(),N=async(_,K)=>{let me=new File(_,"audio.wav");const at=await cs([me],K==="stream");t(1,o=(await ds(at,u,void 0,C??1/0,P))?.filter(Boolean)[0]),b(K,o)};Bl(()=>{f&&M&&M.state!=="inactive"&&M.stop()});async function B(){let _;try{_=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(K){if(!navigator.mediaDevices){b("error",m("audio.no_device_support"));return}if(K instanceof DOMException&&K.name=="NotAllowedError"){b("error",m("audio.allow_recording_access"));return}throw K}if(_!=null){if(f){const[{MediaRecorder:K,register:me},{connect:at}]=await Promise.all($);await me(await at()),M=new K(_,{mimeType:"audio/wav"}),M.addEventListener("dataavailable",L)}else M=new MediaRecorder(_),M.addEventListener("dataavailable",K=>{I.push(K.data)}),M.addEventListener("stop",async()=>{t(16,R=!1),await N(I,"change"),await N(I,"stop_recording"),I=[]});O=!0}}async function L(_){let K=await _.data.arrayBuffer(),me=new Uint8Array(K);if(A||(t(25,A=new Uint8Array(K.slice(0,yi))),me=new Uint8Array(K.slice(yi))),c)W.push(me);else{let at=[A].concat(W,[me]);N(at,"stream"),t(26,W=[])}}async function w(){t(16,R=!0),b("start_recording"),O||await B(),t(25,A=void 0),f&&M.start(Gl)}function X(){b("change",null),b("clear"),t(17,D=""),t(1,o=null)}function y({detail:_}){t(1,o=_),b("change",_),b("upload",_)}function J(){t(16,R=!1),f&&(b("stop_recording"),M.stop(),c&&t(27,z=!0),N(I,"stop_recording"),b("clear"),t(17,D=""))}function re(_){D=_,t(17,D)}function _e(_){qe.call(this,i,_)}function Gt(_){qe.call(this,i,_)}function Yt(_){qe.call(this,i,_)}function Zt(_){k=_,t(0,k)}const Jt=({detail:_})=>b("error",_),Kt=()=>t(17,D="edit");function Qt(_){D=_,t(17,D)}function xt(_){qe.call(this,i,_)}function en(_){qe.call(this,i,_)}function tn(_){qe.call(this,i,_)}function nn(_){qe.call(this,i,_)}function sn(_){E=_,t(2,E)}return i.$$set=_=>{"value"in _&&t(1,o=_.value),"label"in _&&t(3,r=_.label),"root"in _&&t(4,u=_.root),"show_label"in _&&t(5,a=_.show_label),"show_download_button"in _&&t(6,d=_.show_download_button),"sources"in _&&t(7,l=_.sources),"pending"in _&&t(24,c=_.pending),"streaming"in _&&t(8,f=_.streaming),"i18n"in _&&t(9,m=_.i18n),"waveform_settings"in _&&t(10,g=_.waveform_settings),"trim_region_settings"in _&&t(11,h=_.trim_region_settings),"waveform_options"in _&&t(12,p=_.waveform_options),"dragging"in _&&t(0,k=_.dragging),"active_source"in _&&t(2,E=_.active_source),"handle_reset_value"in _&&t(13,v=_.handle_reset_value),"editable"in _&&t(14,S=_.editable),"max_file_size"in _&&t(15,C=_.max_file_size),"$$scope"in _&&t(42,s=_.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&1&&b("drag",k),i.$$.dirty[0]&251658240&&z&&c===!1&&(t(27,z=!1),A&&W)){let _=[A].concat(W);t(26,W=[]),N(_,"stream")}},[k,o,E,r,u,a,d,l,f,m,g,h,p,v,S,C,R,D,b,N,w,X,y,J,c,A,W,z,n,re,_e,Gt,Yt,Zt,Jt,Kt,Qt,xt,en,tn,nn,sn,s]}class Zl extends Rl{constructor(e){super(),$l(this,e,Yl,Xl,zl,{value:1,label:3,root:4,show_label:5,show_download_button:6,sources:7,pending:24,streaming:8,i18n:9,waveform_settings:10,trim_region_settings:11,waveform_options:12,dragging:0,active_source:2,handle_reset_value:13,editable:14,max_file_size:15},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),Y()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),Y()}get root(){return this.$$.ctx[4]}set root(e){this.$$set({root:e}),Y()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),Y()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),Y()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),Y()}get pending(){return this.$$.ctx[24]}set pending(e){this.$$set({pending:e}),Y()}get streaming(){return this.$$.ctx[8]}set streaming(e){this.$$set({streaming:e}),Y()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),Y()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),Y()}get trim_region_settings(){return this.$$.ctx[11]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),Y()}get waveform_options(){return this.$$.ctx[12]}set waveform_options(e){this.$$set({waveform_options:e}),Y()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),Y()}get active_source(){return this.$$.ctx[2]}set active_source(e){this.$$set({active_source:e}),Y()}get handle_reset_value(){return this.$$.ctx[13]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),Y()}get editable(){return this.$$.ctx[14]}set editable(e){this.$$set({editable:e}),Y()}get max_file_size(){return this.$$.ctx[15]}set max_file_size(e){this.$$set({max_file_size:e}),Y()}}const Jl=Zl,{SvelteComponent:Kl,add_flush_callback:Ql,assign:Qi,bind:xl,binding_callbacks:ea,check_outros:ta,create_component:Fe,destroy_component:Xe,detach:Pn,empty:na,flush:V,get_spread_object:xi,get_spread_update:es,group_outros:ia,init:sa,insert:An,mount_component:Ge,safe_not_equal:oa,space:ts,transition_in:ye,transition_out:Ce}=window.__gradio__svelte__internal;function ra(i){let e,t;return e=new Li({props:{variant:i[0]===null&&i[20]==="upload"?"dashed":"solid",border_mode:i[21]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:i[2],elem_classes:i[3],visible:i[4],container:i[10],scale:i[11],min_width:i[12],$$slots:{default:[ua]},$$scope:{ctx:i}}}),{c(){Fe(e.$$.fragment)},m(n,s){Ge(e,n,s),t=!0},p(n,s){const o={};s[0]&1048577&&(o.variant=n[0]===null&&n[20]==="upload"?"dashed":"solid"),s[0]&2097152&&(o.border_mode=n[21]?"focus":"base"),s[0]&4&&(o.elem_id=n[2]),s[0]&8&&(o.elem_classes=n[3]),s[0]&16&&(o.visible=n[4]),s[0]&1024&&(o.container=n[10]),s[0]&2048&&(o.scale=n[11]),s[0]&4096&&(o.min_width=n[12]),s[0]&8364995|s[1]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(ye(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){Xe(e,n)}}}function la(i){let e,t;return e=new Li({props:{variant:"solid",border_mode:i[21]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:i[2],elem_classes:i[3],visible:i[4],container:i[10],scale:i[11],min_width:i[12],$$slots:{default:[ca]},$$scope:{ctx:i}}}),{c(){Fe(e.$$.fragment)},m(n,s){Ge(e,n,s),t=!0},p(n,s){const o={};s[0]&2097152&&(o.border_mode=n[21]?"focus":"base"),s[0]&4&&(o.elem_id=n[2]),s[0]&8&&(o.elem_classes=n[3]),s[0]&16&&(o.visible=n[4]),s[0]&1024&&(o.container=n[10]),s[0]&2048&&(o.scale=n[11]),s[0]&4096&&(o.min_width=n[12]),s[0]&4842115|s[1]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(ye(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){Xe(e,n)}}}function aa(i){let e,t;return e=new _s({props:{i18n:i[19].i18n,type:"audio"}}),{c(){Fe(e.$$.fragment)},m(n,s){Ge(e,n,s),t=!0},p(n,s){const o={};s[0]&524288&&(o.i18n=n[19].i18n),e.$set(o)},i(n){t||(ye(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){Xe(e,n)}}}function ua(i){let e,t,n,s,o;const r=[{autoscroll:i[19].autoscroll},{i18n:i[19].i18n},i[1]];let u={};for(let l=0;l<r.length;l+=1)u=Qi(u,r[l]);e=new Ci({props:u}),e.$on("clear_status",i[35]);function a(l){i[36](l)}let d={label:i[7],show_label:i[9],show_download_button:i[13],value:i[0],root:i[8],sources:i[6],active_source:i[20],pending:i[17],streaming:i[18],max_file_size:i[19].max_file_size,handle_reset_value:i[23],editable:i[15],i18n:i[19].i18n,waveform_settings:i[22],waveform_options:i[16],trim_region_settings:i[24],$$slots:{default:[aa]},$$scope:{ctx:i}};return i[21]!==void 0&&(d.dragging=i[21]),n=new Jl({props:d}),ea.push(()=>xl(n,"dragging",a)),n.$on("change",i[37]),n.$on("stream",i[38]),n.$on("drag",i[39]),n.$on("edit",i[40]),n.$on("play",i[41]),n.$on("pause",i[42]),n.$on("stop",i[43]),n.$on("start_recording",i[44]),n.$on("pause_recording",i[45]),n.$on("stop_recording",i[46]),n.$on("upload",i[47]),n.$on("clear",i[48]),n.$on("error",i[25]),{c(){Fe(e.$$.fragment),t=ts(),Fe(n.$$.fragment)},m(l,c){Ge(e,l,c),An(l,t,c),Ge(n,l,c),o=!0},p(l,c){const f=c[0]&524290?es(r,[c[0]&524288&&{autoscroll:l[19].autoscroll},c[0]&524288&&{i18n:l[19].i18n},c[0]&2&&xi(l[1])]):{};e.$set(f);const m={};c[0]&128&&(m.label=l[7]),c[0]&512&&(m.show_label=l[9]),c[0]&8192&&(m.show_download_button=l[13]),c[0]&1&&(m.value=l[0]),c[0]&256&&(m.root=l[8]),c[0]&64&&(m.sources=l[6]),c[0]&1048576&&(m.active_source=l[20]),c[0]&131072&&(m.pending=l[17]),c[0]&262144&&(m.streaming=l[18]),c[0]&524288&&(m.max_file_size=l[19].max_file_size),c[0]&32768&&(m.editable=l[15]),c[0]&524288&&(m.i18n=l[19].i18n),c[0]&4194304&&(m.waveform_settings=l[22]),c[0]&65536&&(m.waveform_options=l[16]),c[0]&524288|c[1]&1048576&&(m.$$scope={dirty:c,ctx:l}),!s&&c[0]&2097152&&(s=!0,m.dragging=l[21],Ql(()=>s=!1)),n.$set(m)},i(l){o||(ye(e.$$.fragment,l),ye(n.$$.fragment,l),o=!0)},o(l){Ce(e.$$.fragment,l),Ce(n.$$.fragment,l),o=!1},d(l){l&&Pn(t),Xe(e,l),Xe(n,l)}}}function ca(i){let e,t,n,s;const o=[{autoscroll:i[19].autoscroll},{i18n:i[19].i18n},i[1]];let r={};for(let u=0;u<o.length;u+=1)r=Qi(r,o[u]);return e=new Ci({props:r}),e.$on("clear_status",i[29]),n=new Pr({props:{i18n:i[19].i18n,show_label:i[9],show_download_button:i[13],show_share_button:i[14],value:i[0],label:i[7],waveform_settings:i[22],waveform_options:i[16],editable:i[15]}}),n.$on("share",i[30]),n.$on("error",i[31]),n.$on("play",i[32]),n.$on("pause",i[33]),n.$on("stop",i[34]),{c(){Fe(e.$$.fragment),t=ts(),Fe(n.$$.fragment)},m(u,a){Ge(e,u,a),An(u,t,a),Ge(n,u,a),s=!0},p(u,a){const d=a[0]&524290?es(o,[a[0]&524288&&{autoscroll:u[19].autoscroll},a[0]&524288&&{i18n:u[19].i18n},a[0]&2&&xi(u[1])]):{};e.$set(d);const l={};a[0]&524288&&(l.i18n=u[19].i18n),a[0]&512&&(l.show_label=u[9]),a[0]&8192&&(l.show_download_button=u[13]),a[0]&16384&&(l.show_share_button=u[14]),a[0]&1&&(l.value=u[0]),a[0]&128&&(l.label=u[7]),a[0]&4194304&&(l.waveform_settings=u[22]),a[0]&65536&&(l.waveform_options=u[16]),a[0]&32768&&(l.editable=u[15]),n.$set(l)},i(u){s||(ye(e.$$.fragment,u),ye(n.$$.fragment,u),s=!0)},o(u){Ce(e.$$.fragment,u),Ce(n.$$.fragment,u),s=!1},d(u){u&&Pn(t),Xe(e,u),Xe(n,u)}}}function da(i){let e,t,n,s;const o=[la,ra],r=[];function u(a,d){return a[5]?1:0}return e=u(i),t=r[e]=o[e](i),{c(){t.c(),n=na()},m(a,d){r[e].m(a,d),An(a,n,d),s=!0},p(a,d){let l=e;e=u(a),e===l?r[e].p(a,d):(ia(),Ce(r[l],1,1,()=>{r[l]=null}),ta(),t=r[e],t?t.p(a,d):(t=r[e]=o[e](a),t.c()),ye(t,1),t.m(n.parentNode,n))},i(a){s||(ye(t),s=!0)},o(a){Ce(t),s=!1},d(a){a&&Pn(n),r[e].d(a)}}}function fa(i,e,t){let{elem_id:n=""}=e,{elem_classes:s=[]}=e,{visible:o=!0}=e,{interactive:r}=e,{value:u=null}=e,{sources:a}=e,{label:d}=e,{root:l}=e,{show_label:c}=e,{container:f=!0}=e,{scale:m=null}=e,{min_width:g=void 0}=e,{loading_status:h}=e,{autoplay:p=!1}=e,{show_download_button:k}=e,{show_share_button:E=!1}=e,{editable:v=!0}=e,{waveform_options:S={}}=e,{pending:C}=e,{streaming:P}=e,{gradio:R}=e,M=null,D,A=u;const W=()=>{A===null||u===A||t(0,u=A)};let z,O,I=getComputedStyle(document.documentElement).getPropertyValue("--color-accent");const $={color:S.trim_region_color,drag:!0,resize:!0};function T(){document.documentElement.style.setProperty("--trim-region-color",$.color||I)}T();function b({detail:_}){const[K,me]=_.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,h=h||{}),t(1,h.status=me,h),t(1,h.message=_,h),R.dispatch(K,_)}const N=()=>R.dispatch("clear_status",h),B=_=>R.dispatch("share",_.detail),L=_=>R.dispatch("error",_.detail),w=()=>R.dispatch("play"),X=()=>R.dispatch("pause"),y=()=>R.dispatch("stop"),J=()=>R.dispatch("clear_status",h);function re(_){z=_,t(21,z)}const _e=({detail:_})=>t(0,u=_),Gt=({detail:_})=>{t(0,u=_),R.dispatch("stream",u)},Yt=({detail:_})=>t(21,z=_),Zt=()=>R.dispatch("edit"),Jt=()=>R.dispatch("play"),Kt=()=>R.dispatch("pause"),Qt=()=>R.dispatch("stop"),xt=()=>R.dispatch("start_recording"),en=()=>R.dispatch("pause_recording"),tn=_=>R.dispatch("stop_recording"),nn=()=>R.dispatch("upload"),sn=()=>R.dispatch("clear");return i.$$set=_=>{"elem_id"in _&&t(2,n=_.elem_id),"elem_classes"in _&&t(3,s=_.elem_classes),"visible"in _&&t(4,o=_.visible),"interactive"in _&&t(5,r=_.interactive),"value"in _&&t(0,u=_.value),"sources"in _&&t(6,a=_.sources),"label"in _&&t(7,d=_.label),"root"in _&&t(8,l=_.root),"show_label"in _&&t(9,c=_.show_label),"container"in _&&t(10,f=_.container),"scale"in _&&t(11,m=_.scale),"min_width"in _&&t(12,g=_.min_width),"loading_status"in _&&t(1,h=_.loading_status),"autoplay"in _&&t(26,p=_.autoplay),"show_download_button"in _&&t(13,k=_.show_download_button),"show_share_button"in _&&t(14,E=_.show_share_button),"editable"in _&&t(15,v=_.editable),"waveform_options"in _&&t(16,S=_.waveform_options),"pending"in _&&t(17,C=_.pending),"streaming"in _&&t(18,P=_.streaming),"gradio"in _&&t(19,R=_.gradio)},i.$$.update=()=>{i.$$.dirty[0]&268435457&&u&&A===null&&t(28,A=u),i.$$.dirty[0]&134742017&&JSON.stringify(u)!==JSON.stringify(M)&&(t(27,M=u),R.dispatch("change")),i.$$.dirty[0]&1048640&&!D&&a&&t(20,D=a[0]),i.$$.dirty[0]&67174400&&t(22,O={height:50,waveColor:S.waveform_color||"#9ca3af",progressColor:S.waveform_progress_color||I,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:p,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20,mediaControls:S.show_controls,sampleRate:S.sample_rate||44100})},[u,h,n,s,o,r,a,d,l,c,f,m,g,k,E,v,S,C,P,R,D,z,O,W,$,b,p,M,A,N,B,L,w,X,y,J,re,_e,Gt,Yt,Zt,Jt,Kt,Qt,xt,en,tn,nn,sn]}class ha extends Kl{constructor(e){super(),sa(this,e,fa,da,oa,{elem_id:2,elem_classes:3,visible:4,interactive:5,value:0,sources:6,label:7,root:8,show_label:9,container:10,scale:11,min_width:12,loading_status:1,autoplay:26,show_download_button:13,show_share_button:14,editable:15,waveform_options:16,pending:17,streaming:18,gradio:19},null,[-1,-1])}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),V()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),V()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),V()}get interactive(){return this.$$.ctx[5]}set interactive(e){this.$$set({interactive:e}),V()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),V()}get sources(){return this.$$.ctx[6]}set sources(e){this.$$set({sources:e}),V()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),V()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),V()}get show_label(){return this.$$.ctx[9]}set show_label(e){this.$$set({show_label:e}),V()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),V()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),V()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),V()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),V()}get autoplay(){return this.$$.ctx[26]}set autoplay(e){this.$$set({autoplay:e}),V()}get show_download_button(){return this.$$.ctx[13]}set show_download_button(e){this.$$set({show_download_button:e}),V()}get show_share_button(){return this.$$.ctx[14]}set show_share_button(e){this.$$set({show_share_button:e}),V()}get editable(){return this.$$.ctx[15]}set editable(e){this.$$set({editable:e}),V()}get waveform_options(){return this.$$.ctx[16]}set waveform_options(e){this.$$set({waveform_options:e}),V()}get pending(){return this.$$.ctx[17]}set pending(e){this.$$set({pending:e}),V()}get streaming(){return this.$$.ctx[18]}set streaming(e){this.$$set({streaming:e}),V()}get gradio(){return this.$$.ctx[19]}set gradio(e){this.$$set({gradio:e}),V()}}const za=ha;export{Ba as BaseExample,Jl as BaseInteractiveAudio,Wi as BasePlayer,Pr as BaseStaticAudio,za as default};
//# sourceMappingURL=index-XQCWqqci.js.map
